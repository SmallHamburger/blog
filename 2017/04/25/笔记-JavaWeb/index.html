<!DOCTYPE html>
<html>
<head>
    
<!-- Google Analytics -->
<script>
window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
ga('create', 'true', 'auto');
ga('send', 'pageview');
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>
<!-- End Google Analytics -->


    

    



    <meta charset="utf-8">
    
    <meta name="google-site-verification" content="true">
    
    
    
    <title>笔记-JavaWeb (一) | 学习笔记 | BIUBIUBIU...</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="java,JDBC,JSP,Servlet">
    <meta name="description" content="JDBCJDBC接口
驱动管理

DriveManager


连接接口

Connection
DatabaseMetaData


语句对象接口

Statement
PrepareStatement
CallableStatement


结果集接口

ResultSet
ResultSetMetaData



JDBC使用步骤
导入JDBC的jar包
加载驱动
获取Connection对">
<meta property="og:type" content="article">
<meta property="og:title" content="笔记-JavaWeb (一)">
<meta property="og:url" content="http://jeson.org/2017/04/25/笔记-JavaWeb/index.html">
<meta property="og:site_name" content="学习笔记">
<meta property="og:description" content="JDBCJDBC接口
驱动管理

DriveManager


连接接口

Connection
DatabaseMetaData


语句对象接口

Statement
PrepareStatement
CallableStatement


结果集接口

ResultSet
ResultSetMetaData



JDBC使用步骤
导入JDBC的jar包
加载驱动
获取Connection对">
<meta property="og:image" content="http://jeson.org/img/ServeletFlowChart.png">
<meta property="og:image" content="http://jeson.org/img/Servlet运行原理.png">
<meta property="og:image" content="http://jeson.org/img/Servlet生命周期.png">
<meta property="og:image" content="http://jeson.org/img/Servlet接口及实现类.png">
<meta property="og:image" content="http://jeson.org/img/session_1.png">
<meta property="og:updated_time" content="2017-08-09T14:04:24.478Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="笔记-JavaWeb (一)">
<meta name="twitter:description" content="JDBCJDBC接口
驱动管理

DriveManager


连接接口

Connection
DatabaseMetaData


语句对象接口

Statement
PrepareStatement
CallableStatement


结果集接口

ResultSet
ResultSetMetaData



JDBC使用步骤
导入JDBC的jar包
加载驱动
获取Connection对">
<meta name="twitter:image" content="http://jeson.org/img/ServeletFlowChart.png">
    
        <link rel="alternate" type="application/atom+xml" title="学习笔记" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>
</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">会飞的汉堡包</h5>
          <a href="mailto:zhangjisong@live.com" title="zhangjisong@live.com" class="mail">zhangjisong@live.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">笔记-JavaWeb (一)</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">笔记-JavaWeb (一)</h1>
        <h5 class="subtitle">
            
                <time datetime="2017-04-24T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2017-04-25
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术类/">技术类</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#JDBC"><span class="post-toc-number">1.</span> <span class="post-toc-text">JDBC</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JDBC接口"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">JDBC接口</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JDBC使用步骤"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">JDBC使用步骤</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#读取属性文件-Properties"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">读取属性文件, Properties</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用方式"><span class="post-toc-number">1.3.1.</span> <span class="post-toc-text">使用方式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#连接池"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">连接池</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#DBCP-database-connect-pool"><span class="post-toc-number">1.4.1.</span> <span class="post-toc-text">DBCP(database connect pool)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#PreparedStatement"><span class="post-toc-number">1.5.</span> <span class="post-toc-text">PreparedStatement</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ResultSetMetaData"><span class="post-toc-number">1.6.</span> <span class="post-toc-text">ResultSetMetaData</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#事务处理"><span class="post-toc-number">1.7.</span> <span class="post-toc-text">事务处理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#事务"><span class="post-toc-number">1.7.1.</span> <span class="post-toc-text">事务</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JDBC对事务的支持"><span class="post-toc-number">1.7.2.</span> <span class="post-toc-text">JDBC对事务的支持</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#批量更新"><span class="post-toc-number">1.7.3.</span> <span class="post-toc-text">批量更新</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#执行SQL时获取字段值"><span class="post-toc-number">1.7.4.</span> <span class="post-toc-text">执行SQL时获取字段值</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#DAO"><span class="post-toc-number">1.8.</span> <span class="post-toc-text">DAO</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现方式"><span class="post-toc-number">1.8.1.</span> <span class="post-toc-text">实现方式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JavaBean"><span class="post-toc-number">1.8.2.</span> <span class="post-toc-text">JavaBean</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Servlet"><span class="post-toc-number">2.</span> <span class="post-toc-text">Servlet</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#开发Servlet"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">开发Servlet</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#编写Servlet"><span class="post-toc-number">2.1.1.</span> <span class="post-toc-text">编写Servlet</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置Servlet"><span class="post-toc-number">2.1.2.</span> <span class="post-toc-text">配置Servlet</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Servlet工作流程"><span class="post-toc-number">2.1.3.</span> <span class="post-toc-text">Servlet工作流程</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#HTTP协议"><span class="post-toc-number">3.</span> <span class="post-toc-text">HTTP协议</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#如何通信"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">如何通信</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据格式"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">数据格式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#请求数据"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">请求数据</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#响应数据"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">响应数据</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Servlet运行原理"><span class="post-toc-number">4.</span> <span class="post-toc-text">Servlet运行原理</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Servlet使用"><span class="post-toc-number">5.</span> <span class="post-toc-text">Servlet使用</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#设置编码"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">设置编码</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JavaBean-1"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">JavaBean</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#GET-POST使用场景"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">GET/POST使用场景</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#重定向"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">重定向</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#从request中获取访问路径"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">从request中获取访问路径</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#如何配置Servlet访问路径"><span class="post-toc-number">5.6.</span> <span class="post-toc-text">如何配置Servlet访问路径</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#精确匹配"><span class="post-toc-number">5.6.1.</span> <span class="post-toc-text">精确匹配</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通配符"><span class="post-toc-number">5.6.2.</span> <span class="post-toc-text">通配符</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#后缀-建议使用"><span class="post-toc-number">5.6.3.</span> <span class="post-toc-text">后缀(建议使用)</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Servelt生命周期"><span class="post-toc-number">5.7.</span> <span class="post-toc-text">Servelt生命周期</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#ServletConfig和ServletContext"><span class="post-toc-number">5.8.</span> <span class="post-toc-text">ServletConfig和ServletContext</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ServletConfig"><span class="post-toc-number">5.8.1.</span> <span class="post-toc-text">ServletConfig</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ServletContext"><span class="post-toc-number">5.8.2.</span> <span class="post-toc-text">ServletContext</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Servlet接口及实现类"><span class="post-toc-number">5.8.3.</span> <span class="post-toc-text">Servlet接口及实现类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#线程安全问题"><span class="post-toc-number">5.8.4.</span> <span class="post-toc-text">线程安全问题</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#JSP"><span class="post-toc-number">5.9.</span> <span class="post-toc-text">JSP</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP表达式"><span class="post-toc-number">5.9.1.</span> <span class="post-toc-text">JSP表达式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP小脚本"><span class="post-toc-number">5.9.2.</span> <span class="post-toc-text">JSP小脚本</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP声明"><span class="post-toc-number">5.9.3.</span> <span class="post-toc-text">JSP声明</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP指令"><span class="post-toc-number">5.9.4.</span> <span class="post-toc-text">JSP指令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#page指令"><span class="post-toc-number">5.9.5.</span> <span class="post-toc-text">page指令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#include指令"><span class="post-toc-number">5.9.6.</span> <span class="post-toc-text">include指令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSP页面中的隐含对象"><span class="post-toc-number">5.9.7.</span> <span class="post-toc-text">JSP页面中的隐含对象</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#MVC模式"><span class="post-toc-number">5.9.8.</span> <span class="post-toc-text">MVC模式</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Servlet转发和重定向"><span class="post-toc-number">5.10.</span> <span class="post-toc-text">Servlet转发和重定向</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Servlet转发"><span class="post-toc-number">5.10.1.</span> <span class="post-toc-text">Servlet转发</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#重定向-1"><span class="post-toc-number">5.10.2.</span> <span class="post-toc-text">重定向</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用"><span class="post-toc-number">5.10.3.</span> <span class="post-toc-text">使用</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#EL和JSTL表达式"><span class="post-toc-number">5.11.</span> <span class="post-toc-text">EL和JSTL表达式</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#初步使用EL表达式"><span class="post-toc-number">5.11.1.</span> <span class="post-toc-text">初步使用EL表达式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#EL的取值范围"><span class="post-toc-number">5.11.2.</span> <span class="post-toc-text">EL的取值范围</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用EL表达式进行运算"><span class="post-toc-number">5.11.3.</span> <span class="post-toc-text">使用EL表达式进行运算</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用EL表达式获取请求参数值"><span class="post-toc-number">5.11.4.</span> <span class="post-toc-text">使用EL表达式获取请求参数值</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#JSTL的简单使用"><span class="post-toc-number">5.11.5.</span> <span class="post-toc-text">JSTL的简单使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#自定义标签"><span class="post-toc-number">5.11.6.</span> <span class="post-toc-text">自定义标签</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#项目"><span class="post-toc-number">5.12.</span> <span class="post-toc-text">项目</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#异常"><span class="post-toc-number">5.12.1.</span> <span class="post-toc-text">异常</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#访问网页"><span class="post-toc-number">5.12.2.</span> <span class="post-toc-text">访问网页</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#配置错误页面"><span class="post-toc-number">5.12.3.</span> <span class="post-toc-text">配置错误页面</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#cookie和session"><span class="post-toc-number">6.</span> <span class="post-toc-text">cookie和session</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#cookie"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">cookie</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#业务场景"><span class="post-toc-number">6.1.1.</span> <span class="post-toc-text">业务场景</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#前提条件"><span class="post-toc-number">6.1.2.</span> <span class="post-toc-text">前提条件</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用如下对象"><span class="post-toc-number">6.1.3.</span> <span class="post-toc-text">使用如下对象</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#错误情况"><span class="post-toc-number">6.1.3.1.</span> <span class="post-toc-text">错误情况</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#正确情况"><span class="post-toc-number">6.1.3.2.</span> <span class="post-toc-text">正确情况</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#使用情况"><span class="post-toc-number">6.1.3.3.</span> <span class="post-toc-text">使用情况</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#使用-1"><span class="post-toc-number">6.1.4.</span> <span class="post-toc-text">使用</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#特点"><span class="post-toc-number">6.1.5.</span> <span class="post-toc-text">特点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#生存时间"><span class="post-toc-number">6.1.6.</span> <span class="post-toc-text">生存时间</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#路径"><span class="post-toc-number">6.1.7.</span> <span class="post-toc-text">路径</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#session"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">session</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#实现"><span class="post-toc-number">6.2.1.</span> <span class="post-toc-text">实现</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#特点-1"><span class="post-toc-number">6.2.2.</span> <span class="post-toc-text">特点</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#超时"><span class="post-toc-number">6.2.3.</span> <span class="post-toc-text">超时</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-笔记-JavaWeb"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">笔记-JavaWeb (一)</h1>
        <div class="post-meta">
            <time class="post-time" title="2017-04-25 00:00:00" datetime="2017-04-24T16:00:00.000Z"  itemprop="datePublished">2017-04-25</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/技术类/">技术类</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


            

        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><h2 id="JDBC接口"><a href="#JDBC接口" class="headerlink" title="JDBC接口"></a>JDBC接口</h2><ol>
<li><p>驱动管理</p>
<ul>
<li>DriveManager</li>
</ul>
</li>
<li><p>连接接口</p>
<ul>
<li>Connection</li>
<li>DatabaseMetaData</li>
</ul>
</li>
<li><p>语句对象接口</p>
<ul>
<li>Statement</li>
<li>PrepareStatement</li>
<li>CallableStatement</li>
</ul>
</li>
<li><p>结果集接口</p>
<ul>
<li>ResultSet</li>
<li>ResultSetMetaData</li>
</ul>
</li>
</ol>
<h2 id="JDBC使用步骤"><a href="#JDBC使用步骤" class="headerlink" title="JDBC使用步骤"></a>JDBC使用步骤</h2><ol>
<li>导入JDBC的jar包</li>
<li>加载驱动</li>
<li>获取Connection对象</li>
<li>创建Statement语句对象</li>
<li>执行SQL语句<ul>
<li><code>execute(DDL)</code>常用于执行DDL,DCL</li>
<li><code>executeUpdate(DML)</code>常用于执行DML语句</li>
<li><code>executeQuery(DQL)</code>常用于之赐你个DQL语句</li>
</ul>
</li>
<li>处理执行结果<ul>
<li><code>execute(DDL)</code>如果没有异常则成功, 返回值为boolean, true为有数据集, false没有数据集</li>
<li><code>executeUpdate(DML)</code>如果没有异常则成功, 返回数字, 更新记录的行数</li>
<li><code>executeQuery(DQL)</code>如果没有异常则成功, 返回ResultSet结果集, 二维查询结果</li>
</ul>
</li>
<li>关闭数据连接!<ul>
<li>必须关闭, 否则数据库可能会瘫痪</li>
</ul>
</li>
</ol>
<blockquote>
<p>例:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> com.jeson.jdbc;</div><div class="line"><span class="keyword">import</span> java.sql.Connection;</div><div class="line"><span class="keyword">import</span> java.sql.DriverManager;</div><div class="line"><span class="keyword">import</span> java.sql.ResultSet;</div><div class="line"><span class="keyword">import</span> java.sql.SQLException;</div><div class="line"><span class="keyword">import</span> java.sql.Statement;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBC</span> </span>&#123;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String url = <span class="string">"jdbc:mysql://192.168.31.132:3306/db_jeson?user=jeson&amp;password=password"</span>;</div><div class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> String sql = <span class="string">"SELECT * FROM users"</span>;</div><div class="line">	<span class="keyword">static</span> &#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">// 2. 加载驱动</span></div><div class="line">			Class.forName(<span class="string">"com.mysql.jdbc.Driver"</span>);</div><div class="line">		&#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">start</span><span class="params">()</span> </span>&#123;</div><div class="line">		Connection conn = <span class="keyword">null</span>;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			<span class="comment">// 3. 获取连接</span></div><div class="line">			conn = DriverManager.getConnection(url);</div><div class="line">			<span class="comment">// 4. 创建Statement对象</span></div><div class="line">			Statement stmt = conn.createStatement();</div><div class="line">			<span class="comment">// 5. 执行SQL语句</span></div><div class="line">			ResultSet result = stmt.executeQuery(sql);</div><div class="line">			System.out.println(<span class="string">"id\tname\t\tpassword\tage\tsex"</span>);</div><div class="line">			<span class="comment">// 6. 处理SQL执行结果</span></div><div class="line">			<span class="keyword">while</span> (result.next()) &#123;</div><div class="line">				System.out.println(result.getInt(<span class="string">"id"</span>) + <span class="string">"\t"</span></div><div class="line">						+ result.getString(<span class="string">"name"</span>) + <span class="string">"\t"</span></div><div class="line">						+ result.getString(<span class="string">"password"</span>) + <span class="string">"\t\t"</span></div><div class="line">						+ result.getInt(<span class="string">"age"</span>) + <span class="string">"\t"</span> + result.getInt(<span class="string">"sex"</span>));</div><div class="line">			&#125;</div><div class="line">		&#125; <span class="keyword">catch</span> (SQLException e) &#123;</div><div class="line">			e.printStackTrace();</div><div class="line">		&#125; <span class="keyword">finally</span> &#123;</div><div class="line">			<span class="comment">// 7. 关闭连接</span></div><div class="line">			<span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</div><div class="line">				<span class="keyword">try</span> &#123;</div><div class="line">					conn.close();</div><div class="line">				&#125; <span class="keyword">catch</span> (SQLException e) &#123;</div><div class="line">					e.printStackTrace();</div><div class="line">				&#125;</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="读取属性文件-Properties"><a href="#读取属性文件-Properties" class="headerlink" title="读取属性文件, Properties"></a>读取属性文件, Properties</h2><p>一种工具类, 用于读取属性文件, 一般以.properties作为后缀文件, </p>
<p>实际上是一个hashtable</p>
<p>数据格式一般为<code>key = value</code></p>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><blockquote>
<p>例: 定义数据库属性信息</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">jdbc.driverclass=com.mysql.jdbc.Driver</div><div class="line">jdbc.url=jdbc:mysql://192.168.31.132:3306/db_jeson?</div><div class="line">jdbc.user=root</div><div class="line">jdbc.password=1230</div></pre></td></tr></table></figure>
<blockquote>
<p>例: 使用过程</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 加载属性文件</span></div><div class="line">Properties properties = <span class="keyword">new</span> Properties();</div><div class="line"><span class="comment">// 不必手动关闭输入流, 它会自己关闭</span></div><div class="line">properties.load(DBUtils.class.getClassLoader().getResourceAsStream(<span class="string">"db.properties"</span>));<span class="comment">//db.properties在DBUtil所在的资源目录下</span></div><div class="line"><span class="comment">// 获取值</span></div><div class="line">driverClass = properties.getProperty(<span class="string">"jdbc.driverclass"</span>);</div><div class="line">url = properties.getProperty(<span class="string">"jdbc.url"</span>);</div><div class="line">user = properties.getProperty(<span class="string">"jdbc.user"</span>);</div><div class="line">password = properties.getProperty(<span class="string">"jdbc.password"</span>);</div></pre></td></tr></table></figure>
<h2 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h2><p>用于并发连接数据库, 因为数据库支持并发连接数有限, 避免连接过载, DB崩溃</p>
<h3 id="DBCP-database-connect-pool"><a href="#DBCP-database-connect-pool" class="headerlink" title="DBCP(database connect pool)"></a>DBCP(database connect pool)</h3><p>Apache的一个java连接池开源项目, 同时也是tomcat使用的连接池组件</p>
<p>连接池是创建和管理连接的缓冲池技术, 将连接准备好, 供需要他们的应用使用</p>
<blockquote>
<p>例: 使用过程</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 创建连接池核心组件对象</span></div><div class="line">BasicDataSource bds = <span class="keyword">new</span> BasicDataSource();</div><div class="line"><span class="comment">// 初始化连接池</span></div><div class="line">bds.setDriverClassName(<span class="string">"com.mysql.jdbc.Driver"</span>);</div><div class="line">bds.setUrl(<span class="string">"jdbc:oracle:thin:@192.168.0.24:1521:tarena"</span>);</div><div class="line">bds.setUsername(<span class="string">"system"</span>);</div><div class="line">bds.setPassword(<span class="string">"tarena"</span>);</div><div class="line"><span class="comment">// 设置连接策略</span></div><div class="line">bds.setMaxActive(<span class="number">10</span>);</div><div class="line">bds.setInitialSize(<span class="number">1</span>);</div><div class="line"><span class="comment">// 获取链接</span></div><div class="line">Connection conn = bds.getConnection();</div><div class="line">conn.close();</div></pre></td></tr></table></figure>
<h2 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h2><pre><code>动态有条件执行SQL语句, 可以防止注入攻击(Statement可以直接将字符串进行拼接, 在DB执行, 不能够判断是数字还是SQL语句的关键词), Statement只适合执行静态(无条件)SQL
</code></pre><p>建立执行计划的优点:</p>
<ol>
<li>用于缓存通过检查的SQL</li>
<li>下次发送相同的SQL时, 直接调用, 不必再次检查</li>
<li>建立执行计划的目的是检查SQL的次数, 提高效率</li>
<li>防止注入攻击</li>
</ol>
<blockquote>
<p>例: </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Connection conn = bds.getConnection();</div><div class="line">String sql = <span class="string">"SELECT * FROM tab_name WHERE id = ?;"</span>;</div><div class="line">PreparedStatement ps = conn.getPrepareStatement(sql);</div><div class="line"><span class="comment">// 根据索引设置值, 索引从1开始</span></div><div class="line">ps.putInt(<span class="number">1</span>, <span class="number">2</span>);</div><div class="line">ResultSet rs = ps.executeQuery();</div><div class="line"><span class="keyword">while</span>(rs.next())&#123;</div><div class="line">	System.out.println(rs.getInt(<span class="string">"ename"</span>));</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ResultSetMetaData"><a href="#ResultSetMetaData" class="headerlink" title="ResultSetMetaData"></a>ResultSetMetaData</h2><pre><code>描述数据的信息, 数据集合的一种概述, 一般包含查询结果的列数, 列名称, 列类型等等
</code></pre><blockquote>
<p>例: 相关API</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 获取列的数量</span></div><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">getColumnCount</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 获取第i列的列名</span></div><div class="line"><span class="function">String <span class="title">getColumnName</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</div><div class="line"><span class="comment">// 获取第i列的列类型</span></div><div class="line"><span class="function">String <span class="title">getColumnClassName</span><span class="params">(<span class="keyword">int</span> i)</span></span>;</div></pre></td></tr></table></figure>
<h2 id="事务处理"><a href="#事务处理" class="headerlink" title="事务处理"></a>事务处理</h2><h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><ol>
<li>原子性<br> 事务过程是完整不可分割的, 要么成功, 要么失败</li>
<li>一致性<br> 事务前后数据要保持一致, 即收支平衡</li>
<li>隔离性<br> 事务过程中的数据不能被别人访问, 需要收到隔离和保护</li>
<li>持久性<br> 事务一旦完成, 就永久有效</li>
</ol>
<h3 id="JDBC对事务的支持"><a href="#JDBC对事务的支持" class="headerlink" title="JDBC对事务的支持"></a>JDBC对事务的支持</h3><pre><code>默认自动管理事务, 当调用`executeUpdate()`时, 自动提交事务
</code></pre><p>手动管理事务</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> conn.setAutoCommit(<span class="keyword">boolean</span>);</div><div class="line"><span class="keyword">void</span> conn.commit();</div><div class="line"><span class="keyword">void</span> comm.rollback();</div></pre></td></tr></table></figure>
<h3 id="批量更新"><a href="#批量更新" class="headerlink" title="批量更新"></a>批量更新</h3><p>JDBC支持将一条语句建立执行计划, 然后然后将多条记录的数据执行到数据库</p>
<blockquote>
<p>例: 相关API</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将本条数据添加到批处理, 准备发送</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">addBatch</span><span class="params">()</span></span>;</div><div class="line"><span class="comment">// 执行批处理, 发送暂存的一批数据</span></div><div class="line"><span class="keyword">int</span>[] executeBatch();</div><div class="line"><span class="comment">// 清除上一批数据, 以备下一批数据</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">clearBatch</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<blockquote>
<p>例: </p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	Connection conn=<span class="keyword">null</span>;</div><div class="line">	<span class="keyword">try</span> &#123;</div><div class="line">		conn=DBUtils.getConnection();</div><div class="line">		conn.setAutoCommit(<span class="keyword">false</span>);</div><div class="line">		String sql=<span class="string">"insert into emps(eid, ename, sal, deptno)values(seq_emps.nextval,?,?,?) "</span>;</div><div class="line">		PreparedStatement ps = conn.prepareStatement(sql);</div><div class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">108</span>; i++) &#123;</div><div class="line">			ps.setString(<span class="number">1</span>, <span class="string">"jack"</span>+i);</div><div class="line">			ps.setDouble(<span class="number">2</span>, i*<span class="number">1000</span>);</div><div class="line">			ps.setInt(<span class="number">3</span>, <span class="number">1</span>+<span class="number">10</span>);</div><div class="line">			ps.addBatch();</div><div class="line">			<span class="keyword">if</span> (i%<span class="number">30</span>==<span class="number">0</span>) &#123;</div><div class="line">				ps.executeBatch();</div><div class="line">				ps.clearBatch();</div><div class="line">			&#125;</div><div class="line">		&#125;</div><div class="line">		ps.executeBatch();	<span class="comment">//余下不足30的单独发送</span></div><div class="line">		ps.clearBatch();</div><div class="line">		conn.commit();</div><div class="line">	&#125; <span class="keyword">catch</span> (Exception e) &#123;</div><div class="line">		<span class="keyword">try</span> &#123;</div><div class="line">			conn.rollback();</div><div class="line">		&#125; <span class="keyword">catch</span> (SQLException e1) &#123;</div><div class="line">			e1.printStackTrace();</div><div class="line">		&#125;</div><div class="line">	&#125;<span class="keyword">finally</span>&#123;</div><div class="line">		<span class="keyword">if</span> (conn!=<span class="keyword">null</span>) &#123;</div><div class="line">			DBUtils.closeConnection(conn);</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="执行SQL时获取字段值"><a href="#执行SQL时获取字段值" class="headerlink" title="执行SQL时获取字段值"></a>执行SQL时获取字段值</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">Connection conn = bds.getConnection();</div><div class="line">conn.setAutoCommit(<span class="keyword">false</span>);</div><div class="line"><span class="comment">// 先添加新部门到数据库</span></div><div class="line">String sql = <span class="string">"INSERT INTO depts ( name )VALUES( ? )"</span>;</div><div class="line">PrepareStatement ps = conn.prepareStatement(sql, <span class="keyword">new</span> String[]&#123; id &#125;);</div><div class="line">ps.setString(<span class="number">1</span>, name);</div><div class="line">ps.executeUpdate();</div><div class="line"><span class="comment">// 返回的结果集中存储的就是它记住的那些字段的值</span></div><div class="line">ResultSet rs = ps.getGeneratedKeys();</div><div class="line">rs.next();</div><div class="line"><span class="keyword">int</span> deptNo = rs.getInt(<span class="number">1</span>);</div></pre></td></tr></table></figure>
<h2 id="DAO"><a href="#DAO" class="headerlink" title="DAO"></a>DAO</h2><p>数据访问对象(Data Access Object), 数据封装思想, 建立在数据库和业务层之间 封装所有对数据的访问, 数据访问逻辑和业务逻辑分开</p>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><p>一般先写实体类, 再根据逻辑写DAO</p>
<ol>
<li>一个DAO工厂类</li>
<li>一个DAO接口</li>
<li>一个实现DAO接口的具体类</li>
<li>数据传递对象</li>
</ol>
<h3 id="JavaBean"><a href="#JavaBean" class="headerlink" title="JavaBean"></a>JavaBean</h3><p>满足如下规范的类</p>
<ol>
<li>有package</li>
<li>有<code>无参</code>构造器</li>
<li>实现序列化接口</li>
<li>有get/set方法</li>
</ol>
<p>规则</p>
<ol>
<li>通常类名与表名一致</li>
<li>通常该类中的属性名与字段一致</li>
<li>通常该类中的属性都使用封装类型, 如 <code>Integer</code>代替<code>int</code></li>
</ol>
<hr>
<h1 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h1><h2 id="开发Servlet"><a href="#开发Servlet" class="headerlink" title="开发Servlet"></a>开发Servlet</h2><h3 id="编写Servlet"><a href="#编写Servlet" class="headerlink" title="编写Servlet"></a>编写Servlet</h3><ol>
<li>创建package</li>
<li>创建一个类, 名为XXXServlet</li>
<li>集成HttpServlet, 间接实现Servlet接口</li>
<li>重写父类的service()</li>
</ol>
<blockquote>
<p>例: 重写<code>void service(HttpServletRequest request, HttpServletResponse response)</code><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</div><div class="line">	<span class="comment">// 设置响应内容为text/html, 可以被浏览器展示, 否则浏览器不能识别, 会认为是下载文件</span></div><div class="line">	response.setContentType(<span class="string">"text/html"</span>);</div><div class="line">	PrintWriter out = response.getWriter();</div><div class="line">	Date date = <span class="keyword">new</span> Date();</div><div class="line">	SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"HH:mm:ss"</span>);</div><div class="line">	String now = sdf.format(date);</div><div class="line">	out.println(now);</div><div class="line">	out.close();</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="配置Servlet"><a href="#配置Servlet" class="headerlink" title="配置Servlet"></a>配置Servlet</h3><ol>
<li>声明Servlet的类型, 并给它取一个别名</li>
<li>通过别名引用Servlet, 并给它取一个网名(访问路径)</li>
<li>部署</li>
<li>访问<ul>
<li><code>http://ip:port/project_name/path</code></li>
<li><code>http://localhost:8080/Jeson-Web/now</code></li>
</ul>
</li>
</ol>
<blockquote>
<p>例: 编写web.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></div><div class="line">	<span class="attr">xmlns</span>=<span class="string">"http://java.sun.com/xml/ns/javaee"</span> <span class="attr">xmlns:web</span>=<span class="string">"http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span></div><div class="line">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"</span></div><div class="line">	<span class="attr">id</span>=<span class="string">"WebApp_ID"</span> <span class="attr">version</span>=<span class="string">"3.0"</span>&gt;</div><div class="line">	<span class="tag">&lt;<span class="name">display-name</span>&gt;</span>Jeson-Web<span class="tag">&lt;/<span class="name">display-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>index.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.htm<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>default.jsp<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 设置组件别名 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>time<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 组件的类 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.jeson.web.TimeServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 组件别名 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>time<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">		<span class="comment">&lt;!-- 访问路径, 需要以"/"开头 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/now<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="Servlet工作流程"><a href="#Servlet工作流程" class="headerlink" title="Servlet工作流程"></a>Servlet工作流程</h3><ol>
<li>根据访问路径解析出项目名和路径</li>
<li>在web.xml下查找和路径匹配的<code>&lt;servlet-mapping/&gt;</code>, 并在该标签下找到别名<code>&lt;servlet-name/&gt;</code></li>
<li>根据别名在<code>&lt;servlet/&gt;</code>标签中查找相同别名, 找到后在该标签下找到类名<code>&lt;servlet-class&gt;</code></li>
<li>服务器加载找到的类, 并调用<code>service()</code>方法</li>
</ol>
<p>流程图如下:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/ServeletFlowChart.png" alt="Servelet流程图" title="">
                </div>
                <div class="image-caption">Servelet流程图</div>
            </figure>
<h1 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h1><p>定义如何通信以及通信的数据格式</p>
<h2 id="如何通信"><a href="#如何通信" class="headerlink" title="如何通信"></a>如何通信</h2><p>一次请求一次连接, 降低服务器压力</p>
<ol>
<li>建立连接</li>
<li>发送请求</li>
<li>接受响应</li>
<li>断开连接</li>
</ol>
<h2 id="数据格式"><a href="#数据格式" class="headerlink" title="数据格式"></a>数据格式</h2><h3 id="请求数据"><a href="#请求数据" class="headerlink" title="请求数据"></a>请求数据</h3><ul>
<li>请求行: 请求的基本信息</li>
<li>消息头: 请求数据的描述</li>
<li>空行: 分割</li>
<li>实体内容: 具体的业务数据</li>
</ul>
<h3 id="响应数据"><a href="#响应数据" class="headerlink" title="响应数据"></a>响应数据</h3><ul>
<li>状态行: 响应的基本信息, 数据由服务器自动填充</li>
<li>消息头: 响应数据的描述, 大部分数据由服务器填充, 但返回类型需手动指定</li>
<li>空行: 分割</li>
<li>实体内容: 具体的返回数据</li>
</ul>
<blockquote>
<p>例: 获取消息头信息<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 迭代器模式</span></div><div class="line">Enumeration&lt;String&gt; headers = request.getHeaderNames();</div><div class="line"><span class="keyword">while</span> (headers.hasMoreElements()) &#123;</div><div class="line">	String key = (String) headers.nextElement();</div><div class="line">	String value = request.getHeader(key);</div><div class="line">	System.out.println(key + <span class="string">": "</span> + value);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<h1 id="Servlet运行原理"><a href="#Servlet运行原理" class="headerlink" title="Servlet运行原理"></a>Servlet运行原理</h1><p>如图:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/Servlet运行原理.png" alt="Servlet运行原理" title="">
                </div>
                <div class="image-caption">Servlet运行原理</div>
            </figure>
<h1 id="Servlet使用"><a href="#Servlet使用" class="headerlink" title="Servlet使用"></a>Servlet使用</h1><h2 id="设置编码"><a href="#设置编码" class="headerlink" title="设置编码"></a>设置编码</h2><blockquote>
<p>请求:</p>
<ol>
<li>万能方式, 将乱码后的字符串先按照乱码的编码转换为byte数组, 然后再以真正的编码格式转换比较麻烦</li>
<li>针对GET请求路径, 在server.xml文件修改<code>&lt;Connector /&gt;</code>标签, 添加属性<code>URIEncoding=&quot;utf-8&quot;</code></li>
<li>针对POST请求实体内容, 在接受参数前, 调用<code>request.setCharacterEncoding(&quot;utf-8&quot;);</code></li>
</ol>
<p>响应:</p>
<ol>
<li>设置ContentType: <code>res.setContentType(&quot;text/html;charset=utf-8&quot;);</code></li>
<li>设置编码方式: <code>res.setCharacterEncoding(&quot;utf-8&quot;);</code><br>Unit02 pm 16:30</li>
</ol>
</blockquote>
<h2 id="JavaBean-1"><a href="#JavaBean-1" class="headerlink" title="JavaBean"></a>JavaBean</h2><blockquote>
<p>满足如下规范的类:</p>
<ul>
<li>有单独的包</li>
<li>有默认的构造器</li>
<li>实现序列化接口</li>
<li>有get/set方法</li>
</ul>
<p>建议:</p>
<ul>
<li>尽量使用封装类型, 因为它比基本类型多了<code>null</code></li>
<li>使用<code>java.sql</code>包下的日期, 因为JDBC支持这样的类型</li>
<li>dao也要实现序列化接口</li>
</ul>
</blockquote>
<h2 id="GET-POST使用场景"><a href="#GET-POST使用场景" class="headerlink" title="GET/POST使用场景"></a>GET/POST使用场景</h2><blockquote>
<p>建议:</p>
<ul>
<li>查询数据时用GET, 因为通常查询条件较少</li>
<li>提交数据(表单)时用POST, 因为通常提交的数据较多</li>
</ul>
</blockquote>
<h2 id="重定向"><a href="#重定向" class="headerlink" title="重定向"></a>重定向</h2><p><code>response.sendRedirect(&quot;/find&quot;);</code></p>
<p>使用场景</p>
<ol>
<li>解决两个网站之间的跳转问题</li>
<li>解决一个网站内两个独立组件间的跳转</li>
<li>一般增加,修改,删除后重定向</li>
</ol>
<h2 id="从request中获取访问路径"><a href="#从request中获取访问路径" class="headerlink" title="从request中获取访问路径"></a>从request中获取访问路径</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 结果为req.getServletPath()) = </span></div><div class="line"><span class="comment">// 获取结果为相对路径, 可能为空, 因此此方法不可靠</span></div><div class="line">System.out.println(<span class="string">"req.getServletPath()) = "</span> + req.getServletPath());</div><div class="line"><span class="comment">// 结果为req.getContextPath()) = /jeson-project</span></div><div class="line"><span class="comment">// 获取结果为项目路径</span></div><div class="line">System.out.println(<span class="string">"req.getContextPath()) = "</span> + req.getContextPath());</div><div class="line"><span class="comment">// 结果为req.getRequestURI()) = /jeson-project/findAll</span></div><div class="line"><span class="comment">// 获取结果为用户用户访问路径的绝对路径</span></div><div class="line">System.out.println(<span class="string">"req.getRequestURI()) = "</span> + req.getRequestURI());</div><div class="line"><span class="comment">// 结果为req.getRequestURL()) = http://localhost:8080/jeson-project/findAll</span></div><div class="line"><span class="comment">// 获取结果为浏览器路径</span></div><div class="line">System.out.println(<span class="string">"req.getRequestURL()) = "</span> + req.getRequestURL());</div></pre></td></tr></table></figure>
<h2 id="如何配置Servlet访问路径"><a href="#如何配置Servlet访问路径" class="headerlink" title="如何配置Servlet访问路径"></a>如何配置Servlet访问路径</h2><h3 id="精确匹配"><a href="#精确匹配" class="headerlink" title="精确匹配"></a>精确匹配</h3><p>例: /abc</p>
<ul>
<li>只有/abc才能访问这个Servlet</li>
<li>此Servelt只能处理这一个请求</li>
<li>适合规模比较小的项目</li>
</ul>
<h3 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h3><p>例: /*</p>
<ul>
<li>所有路径都能访问此路径</li>
<li>此Servelt能处理所有请求</li>
<li>适合一个项目(某一个模块)只写一个Servelt</li>
</ul>
<h3 id="后缀-建议使用"><a href="#后缀-建议使用" class="headerlink" title="后缀(建议使用)"></a>后缀(建议使用)</h3><p>例: *.hi</p>
<ul>
<li>所有以hi为后缀的请求都能访问此Servelet</li>
<li>此Servlet能处理多个请求</li>
<li>适合一个项目写少量的几个Servelt</li>
</ul>
<h2 id="Servelt生命周期"><a href="#Servelt生命周期" class="headerlink" title="Servelt生命周期"></a>Servelt生命周期</h2><p>管理Servlet的生命周期, 便于开发者在Servelt某个生命阶段做不同的处理</p>
<ol>
<li>默认首次访问Servlet时Tomcat实例化它, 也可以修改为启动Tomcat时就实例化(当前图为这种情况, 在web.xml的servelt标签下添加<code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</code>, 中间的值为实例化的顺序)</li>
<li>默认的执行顺序为new –&gt; init() –&gt; service() –&gt; destroy</li>
<li>每次请求都会执行service()</li>
<li>每个Servlet都是单例模式</li>
</ol>
<p>生命周期图:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="img/Servlet生命周期.png" alt="Servlet生命周期" title="">
                </div>
                <div class="image-caption">Servlet生命周期</div>
            </figure>
<h2 id="ServletConfig和ServletContext"><a href="#ServletConfig和ServletContext" class="headerlink" title="ServletConfig和ServletContext"></a>ServletConfig和ServletContext</h2><h3 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h3><ul>
<li>每一个Servlet实例配置一个ServletConfig</li>
<li>给单个Servlet预置数据时使用</li>
<li>在Servlet实例init()之前创建</li>
<li>可以在web.xml中配置</li>
</ul>
<p>使用:<br>在web.xml文件相应的Servlet标签下添加如下代码段<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>maxOnline<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>在java文件中<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String maxOnline = getServletConfig().getInitParameter(<span class="string">"maxOnline"</span>);</div></pre></td></tr></table></figure></p>
<h3 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h3><ul>
<li>单例模式, 整个项目中共享</li>
<li>给所有Servlet预置数据时使用</li>
<li>在Tomcat启动时就会创建</li>
</ul>
<p>使用:<br>在web.xml文件根标签web-app下添加如下代码<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">context-param</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>maxOnline<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>在java文件中<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">String maxOnline = getServletContext().getInitParameter(<span class="string">"maxOnline"</span>);</div></pre></td></tr></table></figure></p>
<p>技巧:</p>
<ul>
<li>单独写一个<code>InitServlet</code>, 在<code>init(ServletConfig config)</code>方法中完成自己需要完成的初始化工作, 需要在web.xml文件这个Servlet相应标签下添加<code>&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;</code>, 不需要配置<code>servlet-mapping</code></li>
<li>可以在ServletContext中设置变量, 记录某些值, 如访问次数</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// InitServlet下初始化属性initCount</span></div><div class="line">getServletContext().setAttribute(<span class="string">"initCount"</span>, <span class="number">0</span>);</div><div class="line"><span class="comment">// 其他Servlet设置initCount, 或者获取initCount值</span></div><div class="line">getServletContext().getAttribute(<span class="string">"initCount"</span>);</div></pre></td></tr></table></figure>
<h3 id="Servlet接口及实现类"><a href="#Servlet接口及实现类" class="headerlink" title="Servlet接口及实现类"></a>Servlet接口及实现类</h3><p>如图:</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/Servlet接口及实现类.png" alt="Servelet流程图" title="">
                </div>
                <div class="image-caption">Servelet流程图</div>
            </figure>
<h3 id="线程安全问题"><a href="#线程安全问题" class="headerlink" title="线程安全问题"></a>线程安全问题</h3><ol>
<li>尽量使用局部变量</li>
<li>使用到全局变量时使用<code>synchronized</code>关键字</li>
</ol>
<h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><h3 id="JSP表达式"><a href="#JSP表达式" class="headerlink" title="JSP表达式"></a>JSP表达式</h3><ul>
<li>语法规则: &lt;%= …%&gt;</li>
<li>合法内容: 变量、变量加运算符组合的表达式、有返回值的方法</li>
<li>转译成Servlet时的规则: 在<code>service()</code>方法中用<code>out.print</code>语句输出该变量、表达式、方法的值</li>
</ul>
<h3 id="JSP小脚本"><a href="#JSP小脚本" class="headerlink" title="JSP小脚本"></a>JSP小脚本</h3><ul>
<li>语法规则: &lt;% …%&gt;</li>
<li>合法内容: 能够写在方法里的java代码片段都可以作为小脚本</li>
<li>转译成Servlet时的规则: 原封不动成为Servlet类的<code>service()</code>方法里面的一段代码</li>
</ul>
<h3 id="JSP声明"><a href="#JSP声明" class="headerlink" title="JSP声明"></a>JSP声明</h3><ul>
<li>语法规则: &lt;%! …%&gt;</li>
<li>合法内容: 成员属性或成员方法的声明</li>
<li>转译成Servlet时的规则: 成为JSP页面转译成Servlet类中成员属性或者成员方法</li>
</ul>
<blockquote>
<p>例:</p>
</blockquote>
<ul>
<li>jsp文件</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&lt;%@page pageEncoding="utf-8"%&gt;</div><div class="line"></div><div class="line">&lt;!doctype html&gt;</div><div class="line">&lt;html&gt;</div><div class="line">	&lt;head&gt;</div><div class="line">		&lt;meta charset="utf-8"&gt;</div><div class="line">		&lt;title&gt;hello&lt;/title&gt;</div><div class="line">	&lt;/head&gt;</div><div class="line">	&lt;body&gt;</div><div class="line">		&lt;%!private double x100(double num) &#123;</div><div class="line">			return num * 100;</div><div class="line">		&#125;%&gt;</div><div class="line">		</div><div class="line">		&lt;ul&gt;</div><div class="line">		</div><div class="line">			&lt;%</div><div class="line">				for (int i = 0; i &lt; 10; i++) &#123;</div><div class="line">			%&gt;</div><div class="line">			</div><div class="line">			&lt;li&gt;&lt;%=x100(Math.random())%&gt;&lt;/li&gt;</div><div class="line">			</div><div class="line">			&lt;%</div><div class="line">				&#125;</div><div class="line">			%&gt;</div><div class="line">			</div><div class="line">		&lt;/ul&gt;</div><div class="line">		</div><div class="line">	&lt;/body&gt;</div><div class="line">&lt;/html&gt;</div></pre></td></tr></table></figure>
<ul>
<li>web.xml中的配置, 可以配置, 也可以不配置</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">jsp-file</span>&gt;</span>/Hello.jsp<span class="tag">&lt;/<span class="name">jsp-file</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/hello<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="JSP指令"><a href="#JSP指令" class="headerlink" title="JSP指令"></a>JSP指令</h3><ul>
<li>语法规则: &lt;%@指令名 属性=值 %&gt;</li>
<li>作用: 控制JSP在转译成Servlet类时生成的内容</li>
<li>常用指令: page指令, include指令, taglib指令</li>
</ul>
<h3 id="page指令"><a href="#page指令" class="headerlink" title="page指令"></a>page指令</h3><ul>
<li>作用: 用于导包, 设置页面属性</li>
</ul>
<blockquote>
<p>例:</p>
</blockquote>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;%-- 导包 --&gt;</div><div class="line">&lt;%<span class="meta">@page</span> <span class="keyword">import</span>=<span class="string">"java.util.*"</span> %&gt;</div><div class="line"></div><div class="line">&lt;%-- 设置response.setContentType()方法的参数 --&gt;</div><div class="line">&lt;%<span class="meta">@page</span> contentType=<span class="string">"image/git"</span> %&gt;</div><div class="line"></div><div class="line">&lt;%-- 设置容器读取该文件时的解码 --&gt;</div><div class="line">&lt;%<span class="meta">@page</span> pageEncoding=<span class="string">"UTF-8"</span> %&gt;</div></pre></td></tr></table></figure>
<h3 id="include指令"><a href="#include指令" class="headerlink" title="include指令"></a>include指令</h3><ul>
<li>作用: </li>
</ul>
<ol>
<li>在JSP页面转换成Servlet时, 能够将其他文件包含进来. 可以包含JSP文件, 可以是静态的HTML文件.</li>
<li>通过该语句能方便的在每个JSP页面中包含导航栏, 版权声明, logo等</li>
</ol>
<ul>
<li>语法: &lt;%@include file=”footer.html”%&gt;</li>
</ul>
<p>Unit05： 转发 、 JSP开发常见问题 am</p>
<h3 id="JSP页面中的隐含对象"><a href="#JSP页面中的隐含对象" class="headerlink" title="JSP页面中的隐含对象"></a>JSP页面中的隐含对象</h3><ul>
<li>输入输出对象<ul>
<li>request: HttpServletRequest, 请求信息</li>
<li>response: HttpServletResponse, 响应信息</li>
<li>out: JSPWriter, 输出的数据流</li>
</ul>
</li>
<li>作用域通信对象<ul>
<li>session: HttpSeeesion, 会话</li>
<li>application: ServletContext, 全局的上下文对象</li>
<li>pageContext: PageContext, JSP页面上下文, 可以获取其他八个隐含对象</li>
</ul>
</li>
<li>Servlet对象<ul>
<li>page: Object, JSP页面本身</li>
<li>config: ServletConfig, Servlet配置对象</li>
</ul>
</li>
<li>异常对象<ul>
<li>exception: Throwable, 捕获页面异常</li>
</ul>
</li>
</ul>
<h3 id="MVC模式"><a href="#MVC模式" class="headerlink" title="MVC模式"></a>MVC模式</h3><p>Model: DAO<br>View: JSP<br>Control: Servlet</p>
<blockquote>
<p>例: Servlet转发</p>
</blockquote>
<p>Servlet相关代码<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 将数据放入emp属性中</span></div><div class="line">request.setAttribute(<span class="string">"emps"</span>, <span class="keyword">new</span> ArrayList&lt;&gt;());</div><div class="line"><span class="comment">// 将请求转发到JSP文件中</span></div><div class="line">request.getRequestDispatcher(<span class="string">"/Emp.jsp"</span>).forward(request, response);</div></pre></td></tr></table></figure></p>
<p>Emp.jsp相关代码<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;ul&gt;</div><div class="line">	&lt;%</div><div class="line">	    // 从隐含对象request中取出emps属性值显示</div><div class="line">		for (EMP emp : ((List&lt;EMP&gt;)request.getAttribute("emps"))) &#123;</div><div class="line">	%&gt;</div><div class="line">	&lt;li&gt;&lt;%=emp.toString() %&gt;&lt;/li&gt;</div><div class="line">	&lt;%</div><div class="line">		&#125;</div><div class="line">	%&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<h2 id="Servlet转发和重定向"><a href="#Servlet转发和重定向" class="headerlink" title="Servlet转发和重定向"></a>Servlet转发和重定向</h2><h3 id="Servlet转发"><a href="#Servlet转发" class="headerlink" title="Servlet转发"></a>Servlet转发</h3><ul>
<li>一次请求</li>
<li>Servlet组件间跳转</li>
<li>表现在服务器端</li>
</ul>
<h3 id="重定向-1"><a href="#重定向-1" class="headerlink" title="重定向"></a>重定向</h3><ul>
<li>两次请求</li>
<li>两个地址间的跳转</li>
<li>表现在客户端</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li>查询时用转发</li>
<li>增加, 修改, 删除后用重定向</li>
</ul>
<h2 id="EL和JSTL表达式"><a href="#EL和JSTL表达式" class="headerlink" title="EL和JSTL表达式"></a>EL和JSTL表达式</h2><h3 id="初步使用EL表达式"><a href="#初步使用EL表达式" class="headerlink" title="初步使用EL表达式"></a>初步使用EL表达式</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!-- EL获取Bean的属性 --&gt;</div><div class="line">&lt;!-- 和get/set对应的属性叫Bean属性, EL会通过类反射获取 --&gt;</div><div class="line">&lt;!-- 下面一行代码相当于request.getAttribute("stu").getName() --&gt;</div><div class="line">&lt;p&gt;姓名: $&#123;stu.name&#125;&lt;/p&gt;</div><div class="line">&lt;p&gt;姓名: $&#123;stu["name"]&#125;&lt;/p&gt;</div><div class="line">&lt;p&gt;姓名: $&#123;stu.course.id&#125;&lt;/p&gt;</div></pre></td></tr></table></figure>
<h3 id="EL的取值范围"><a href="#EL的取值范围" class="headerlink" title="EL的取值范围"></a>EL的取值范围</h3><ul>
<li>EL依次从以下四个对象依次取值<code>page, request, session, application</code>, 这四个隐含对象是EL默认的取值范围</li>
<li>也可以指定取值范围, 例如从request中取值, <code>${requestScope.stu.name}</code></li>
<li>设计默认取值范围是为了简化EL表达式, 不必经常写范围</li>
</ul>
<h3 id="使用EL表达式进行运算"><a href="#使用EL表达式进行运算" class="headerlink" title="使用EL表达式进行运算"></a>使用EL表达式进行运算</h3><ul>
<li>算术运算: <code>+ - * / %</code>, 其中<code>+</code>只能进行算数运算, 不能做字符串的连接</li>
<li>逻辑运算: <code>&amp;&amp; || !</code></li>
<li>关系运算: <code>&gt; &gt;= &lt; &lt;= == !=</code></li>
<li>判空运算: <code>empty</code>, 判断字符串是否为空或者集合是否为空, 以下四种情况为true:空字符串, 空集合, 值为null, 找不到对应的值</li>
</ul>
<blockquote>
<p>例: EL表达式进行运算</p>
</blockquote>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;p&gt;年龄 + 5: $&#123;stu.age + 5&#125;&lt;/p&gt;</div><div class="line">&lt;p&gt;年龄 20~30: $&#123;stu.age &gt;=20 &amp;&amp; stu.age &lt;30&#125;&lt;/p&gt;</div><div class="line">&lt;p&gt;判空: $&#123;stu.course.empty&#125;&lt;/p&gt;</div></pre></td></tr></table></figure>
<h3 id="使用EL表达式获取请求参数值"><a href="#使用EL表达式获取请求参数值" class="headerlink" title="使用EL表达式获取请求参数值"></a>使用EL表达式获取请求参数值</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;!-- request.getParameter("name") --&gt;</div><div class="line">&lt;p&gt;姓名: $&#123;param.name&#125;&lt;/p&gt;</div><div class="line">&lt;!-- request.getParameterValues("cities") --&gt;</div><div class="line">&lt;p&gt;姓名: $&#123;paramValues.cities&#125;&lt;/p&gt;</div></pre></td></tr></table></figure>
<h3 id="JSTL的简单使用"><a href="#JSTL的简单使用" class="headerlink" title="JSTL的简单使用"></a>JSTL的简单使用</h3><ol>
<li>将JSTL标签对应的jar文件复制到WEB-INF/lib目录下</li>
<li>使用taglib指令导入要使用的JSP标签, 如<code>&lt;%@taglib uri=&quot;&quot; prefix=&quot;&quot;%&gt;</code>, uri表示JSP标签的命名空间, prefix表示命名空间的前缀</li>
</ol>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;!-- if --&gt;</div><div class="line">&lt;c:if test="$&#123;stu.sex=='M' &#125;"&gt;男&lt;/c:if&gt;</div><div class="line"></div><div class="line">&lt;!-- choose --&gt;</div><div class="line">&lt;c:choose&gt;</div><div class="line">	&lt;c:when test="$&#123;stu.sex=='M' &#125;"&gt;男&lt;/c:when&gt;</div><div class="line">	&lt;c:otherwise&gt;女&lt;/c:otherwise&gt;</div><div class="line">&lt;/c:choose&gt;</div><div class="line"></div><div class="line">&lt;!-- forEach --&gt;</div><div class="line">&lt;!-- items: 声明要遍历的数据 --&gt;</div><div class="line">&lt;!-- var: 每次循环所获得的数据命名 --&gt;</div><div class="line">&lt;c:forEach items = "$&#123;stu.courses&#125;" var = "course"&gt;</div><div class="line">	$&#123;i.name&#125;</div><div class="line">&lt;/c:forEach&gt;</div></pre></td></tr></table></figure>
<h3 id="自定义标签"><a href="#自定义标签" class="headerlink" title="自定义标签"></a>自定义标签</h3><p>// TODO</p>
<h2 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h2><ol>
<li><p>导包</p>
<ol>
<li>javaEE</li>
<li>jdbc</li>
<li>dbcp</li>
<li>jstl</li>
</ol>
</li>
<li><p>开发步骤</p>
<ol>
<li>根据操作分析本功能包含的请求</li>
<li>画图分析流程</li>
<li>按照执行流程的倒序逐个开发</li>
</ol>
</li>
</ol>
<h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p>异常记录到日志中, log4j</p>
<h3 id="访问网页"><a href="#访问网页" class="headerlink" title="访问网页"></a>访问网页</h3><ol>
<li>浏览器访问服务器获取网页的过程包含多个请求<ol>
<li>先获取网页</li>
<li>加载head</li>
<li>获取CSS, link标签</li>
<li>加载body</li>
<li>获取图片</li>
</ol>
</li>
<li>WEB-INF目录具有保护作用, 放在其内的资源无法直接访问, 必须通过转发访问<ol>
<li>如果jsp文件没有放到WEB-INF下, 就可以直接访问</li>
<li>在MVC模式下, 直接访问jsp会使其丢失数据来源, 导致报错</li>
<li>将其放到WEB-INF下, 就是保护jsp不被直接访问, 从而避免报错</li>
<li>webApp下放置的静态资源可以直接被访问, 如CSS, img</li>
</ol>
</li>
</ol>
<h3 id="配置错误页面"><a href="#配置错误页面" class="headerlink" title="配置错误页面"></a>配置错误页面</h3><ol>
<li>tomcat是所有服务器端代码调用的入口, 他在调用代码时会尝试捕获异常</li>
<li>默认的它捕获到异常时会自动转发到对应的错误页面, 如404.html/500.html</li>
<li>我们可以通过配置改变这个默认的行为, 明确告诉tomcat哪个异常去哪个错误页面, 这件事本身解决不了异常, 仅仅是让用户看起来更友好而已</li>
<li>声明错误页面时需要写绝对路径, 但是由于是转发过去, 只能访问此项目内部资源, 所以tomcat会自动帮我们加上项目名</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;!--通过异常类型进行配置--&gt;</div><div class="line">&lt;error-page&gt;</div><div class="line">    &lt;exception-type&gt;java.lang.Exception&lt;/exception-type&gt;</div><div class="line">    &lt;location&gt;/WEB-INF/error.jsp&lt;/location&gt;</div><div class="line">&lt;/error-page&gt;</div><div class="line">&lt;!--通过异常编号(404/405/500)进行配置--&gt;</div><div class="line">&lt;error-page&gt;</div><div class="line">    &lt;error-code&gt;&lt;/error-code&gt;</div><div class="line">    &lt;location&gt;&lt;/location&gt;</div><div class="line">&lt;/error-page&gt;</div></pre></td></tr></table></figure>
<h1 id="cookie和session"><a href="#cookie和session" class="headerlink" title="cookie和session"></a>cookie和session</h1><h2 id="cookie"><a href="#cookie" class="headerlink" title="cookie"></a>cookie</h2><h3 id="业务场景"><a href="#业务场景" class="headerlink" title="业务场景"></a>业务场景</h3><ul>
<li>登录时要记录账号</li>
<li>以后访问查询, 修改, 增加页面时要修改账号</li>
</ul>
<h3 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h3><ul>
<li>浏览器和服务器是多对一关系</li>
</ul>
<h3 id="使用如下对象"><a href="#使用如下对象" class="headerlink" title="使用如下对象"></a>使用如下对象</h3><h4 id="错误情况"><a href="#错误情况" class="headerlink" title="错误情况"></a>错误情况</h4><ul>
<li>request: 登录, 查询是不同的请求, 使用不同的request</li>
<li>config: 开发时使用多个servlet处理不同的请求, 如登录用一个servlet, 查询用另外一个servlet, 多个servlet用不同的servlet,  没有读写变量的能力</li>
<li>context: 会串包, tomcat只有这一个对象, 多个存入会有冲突</li>
</ul>
<h4 id="正确情况"><a href="#正确情况" class="headerlink" title="正确情况"></a>正确情况</h4><p>使用cookie或者session </p>
<ul>
<li>cookie: 存储在浏览器上, 服务器压力小, 但数据不安全</li>
<li>session: 存储在服务器上, 服务器压力大, 但数据安全</li>
</ul>
<h4 id="使用情况"><a href="#使用情况" class="headerlink" title="使用情况"></a>使用情况</h4><ul>
<li>重要数据存在session上</li>
<li>一般数据存储在cookie上</li>
</ul>
<h3 id="使用-1"><a href="#使用-1" class="headerlink" title="使用"></a>使用</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span></div><div class="line">        <span class="keyword">throws</span> ServletException, IOException &#123;</div><div class="line">    String code =   req.getParameter(<span class="string">"code"</span>);</div><div class="line">    <span class="comment">// 每个cookie只能存一条数据, 包括key或者value, 都是字符串</span></div><div class="line">    Cookie cookie = <span class="keyword">new</span> Cookie(<span class="string">"code"</span>, code);</div><div class="line">    <span class="comment">// 将cookie发送给浏览器, 浏览器接收到会自动保存</span></div><div class="line">    resp.addCookie(cookie);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span></div><div class="line">        <span class="keyword">throws</span> ServletException, IOException &#123;</div><div class="line">    <span class="comment">//  获取cookie</span></div><div class="line">    Cookie[] cookies = req.getCookies();</div><div class="line">    <span class="keyword">if</span> (cookies != <span class="keyword">null</span>) &#123;</div><div class="line">        resp.setContentType(<span class="string">"text/html;charset=utf-8"</span>);</div><div class="line">        PrintWriter pw = resp.getWriter();</div><div class="line">        <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</div><div class="line">            pw.println(cookie.getName() + <span class="string">": "</span> + cookie.getValue() + <span class="string">"&lt;br/&gt;"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>4K大小</li>
<li>cookie保存在浏览器上</li>
<li>多个请求可以共用一组cookie</li>
<li>多个Servlet可以共用一组cookie</li>
<li>每个用户(浏览器)访问服务器, 都会获得一组cookie</li>
</ul>
<h3 id="生存时间"><a href="#生存时间" class="headerlink" title="生存时间"></a>生存时间</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cookie.setMaxAge(Integer.MAX_VALUE);</div></pre></td></tr></table></figure>
<ul>
<li>second &gt; 0: 浏览器要保存Cookie的最长时间为设置的参数值, 如果超过指定的时间, 浏览器会自动删除这个cookie, 此时保存到硬盘上</li>
<li>second == 0: 删除cookie, 在修改cookie的生存时间为0后, 随着response发送回客户端, 替换原有的cookie, 因生命周期到了将直接删除</li>
<li>second &lt; 0: 缺省值, 浏览器会将cookie存储到内存中</li>
</ul>
<h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3><p>默认在某一个路径下创建的cookie, 只在相同路径下有效, 可以设置路径</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cookie.setPath(<span class="string">"/"</span>);</div></pre></td></tr></table></figure>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><p>session大致工作流程</p>
<figure class="image-bubble">
                <div class="img-lightbox">
                    <div class="overlay"></div>
                    <img src="/img/session_1.png" alt="session大致流程" title="">
                </div>
                <div class="image-caption">session大致流程</div>
            </figure>
<h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span></div><div class="line">        <span class="keyword">throws</span> ServletException, IOException &#123;</div><div class="line">    String code = req.getParameter(<span class="string">"code"</span>);</div><div class="line">    <span class="comment">// 响应时服务器会自动创建cookie, 将session的ID通过cookie发送给浏览器</span></div><div class="line">    <span class="comment">// Cookie cookie = new Cookie("JSESSION", session.getId());</span></div><div class="line">    HttpSession session = req.getSession();</div><div class="line">    <span class="comment">// 可以保存任意对象</span></div><div class="line">    session.setAttribute(<span class="string">"code"</span>, code);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> </span></div><div class="line">        <span class="keyword">throws</span> ServletException, IOException &#123;</div><div class="line">    HttpSession session = req.getSession();</div><div class="line">    <span class="comment">// 本次请求浏览器传入了SID, 服务器就根据此找到旧的session, 可以从中读取之前存储的数据</span></div><div class="line">    session.getAttribute(<span class="string">"code"</span>);</div><div class="line">    <span class="comment">// 销毁session</span></div><div class="line">    session.invalidate();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ul>
<li>浏览器第一次访问浏览器时, 服务器会给它创建一个session</li>
<li>服务器会使用cookie返回给服务器</li>
<li>浏览器再次访问服务器时会传入SID</li>
<li>多个Servlet可以共用一个session</li>
<li>不同的浏览器使用不同的session</li>
</ul>
<h3 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h3><p>为避免过度浪费空间, 默认超时时间为30分钟, 最短为1分钟, 但一般tomcat检查session时间间隔为2分钟</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!--在web.xml设置超时时间--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// session 设置超时, 最短为1分钟</span></div><div class="line">session.setMaxInactiveInterval(<span class="number">1</span>);</div></pre></td></tr></table></figure>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2017-08-09T14:04:24.478Z" itemprop="dateUpdated">2017-08-09 22:04:24</time>
</span><br>


        
    </div>
    <footer>
        <a href="http://jeson.org">
            <img src="/img/avatar.jpg" alt="会飞的汉堡包">
            会飞的汉堡包
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JDBC/">JDBC</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JSP/">JSP</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Servlet/">Servlet</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://jeson.org/2017/04/25/笔记-JavaWeb/&title=《笔记-JavaWeb (一)》 — 学习笔记&pic=http://jeson.org/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://jeson.org/2017/04/25/笔记-JavaWeb/&title=《笔记-JavaWeb (一)》 — 学习笔记&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://jeson.org/2017/04/25/笔记-JavaWeb/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《笔记-JavaWeb (一)》 — 学习笔记&url=http://jeson.org/2017/04/25/笔记-JavaWeb/&via=http://jeson.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://jeson.org/2017/04/25/笔记-JavaWeb/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2017/06/02/Jeson-Android-MVP基本框架/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">Jeson Android MVP</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2017/04/23/Android常用框架/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Android中常用的第三方框架</h4>
      </a>
    </div>
  
</nav>



    
















</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <ul class="reward-items">
        

        
    </ul>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p style="display:none;">
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p>
            <span style="display:none;">Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a></span>
            <span>会飞的汉堡包 &copy; 2016 - 2017</span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://jeson.org/2017/04/25/笔记-JavaWeb/&title=《笔记-JavaWeb (一)》 — 学习笔记&pic=http://jeson.org/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://jeson.org/2017/04/25/笔记-JavaWeb/&title=《笔记-JavaWeb (一)》 — 学习笔记&source=" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://jeson.org/2017/04/25/笔记-JavaWeb/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《笔记-JavaWeb (一)》 — 学习笔记&url=http://jeson.org/2017/04/25/笔记-JavaWeb/&via=http://jeson.org" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://jeson.org/2017/04/25/笔记-JavaWeb/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJElEQVR42u3aQXLDIAwF0Nz/0ukB0uAvRDtj+bHyJDbmeaGRQK9XPN4fY/1vcv+368/7jw0MDIzbMpLXr39Jnv28Xs+crw0DA+M5jG8RLJn6VBhdz3mxZgwMDIxiOpiE6fXMGBgYGKcC7l6NuRfEMTAwMPYK0Zyaf4g/r8UxMDBuyMjD5f9f/8n5BgYGxq0Y7+KoHmd2ttsKq8LAwBjNyAPcsYPGYvGcrwcDA2MqI3+gf8TYL2Jf1e+BgYExmrFexN79e80ZUaGLgYExmpGH1E47RVKmdoIyBgbGExjr1+T3VANonpJW01kMDIxJjHUCV9iU3wrf68Ba2LzDwMB4DCMvRKsh9dRxwteZMTAwRjOqwbea0uUBNy+hL0pcDAyMcYx8273T5pVncZufFQMDYzSjk7rl1L2NuVZSiIGBMYixl/ydbfOqHo5iYGBgVBu8zm7x5+1ovxSxGBgYoxmdhq28LSMJo+tnv/6OgYExmpG/uErtHDDsNWdgYGDMZuTL6mzMVcNuOZXEwMB4AKNapm5ujTW28woPYGBgjGZUG7b6KWAnZcTAwHgC410ceSjMt+GqYR0DA+NpjGqitn44KXqrpemBpWNgYIxgdIJs/2izWkJfnMdiYGCMZlRr32prV2GLv1PKYmBgYGwVq9XydfNzYGBgYMT9ZTk4L1CT5BUDA+MJjLONXIXXx/NfBHoMDIzRjL3SsRM6+2nl5okHBgbG/Rg/Kr2Jh544+fYAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };



</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>



<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';
    }
});
</script>

<script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" async></script>




<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '会飞的汉堡包';
            clearTimeout(titleTime);
        } else {
            document.title = '会飞的汉堡包';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
