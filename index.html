<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/blog/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/blog/favicon.ico" />






<meta property="og:type" content="website">
<meta property="og:title" content="学习笔记">
<meta property="og:url" content="https://smallhamburger.github.io/index.html">
<meta property="og:site_name" content="学习笔记">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="学习笔记">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://smallhamburger.github.io/"/>





  <title> 学习笔记 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/blog/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">学习笔记</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
    
      <p class="site-subtitle">BIUBIUBIU...</p>
    
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://smallhamburger.github.io/blog/2016/12/01/笔记-Android源码设计模式解析与实战/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="会飞的汉堡包">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/blog/images/zjs_blog_icon.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="学习笔记">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="学习笔记" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2016/12/01/笔记-Android源码设计模式解析与实战/" itemprop="url">
                  Android源码设计模式解析与实战
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-01T00:00:00+08:00">
                2016-12-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/技术类/" itemprop="url" rel="index">
                    <span itemprop="name">技术类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2016/12/01/笔记-Android源码设计模式解析与实战/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/01/笔记-Android源码设计模式解析与实战/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="面向对象的六大原则"><a href="#面向对象的六大原则" class="headerlink" title="面向对象的六大原则"></a>面向对象的六大原则</h1><p>稳定性 扩展性 健壮性 灵活性 高内聚 低耦合</p>
<h2 id="1、单一职责原则"><a href="#1、单一职责原则" class="headerlink" title="1、单一职责原则"></a>1、单一职责原则</h2><p>一个类应该是一组相关性很高的函数、数据的封装。</p>
<h2 id="2、开闭原则"><a href="#2、开闭原则" class="headerlink" title="2、开闭原则"></a>2、开闭原则</h2><p>软件中的对象（类、模块、函数等）应该对扩展是开放的，对修改是封闭的。</p>
<h2 id="3、里氏替换原则"><a href="#3、里氏替换原则" class="headerlink" title="3、里氏替换原则"></a>3、里氏替换原则</h2><p>抽象，多态（行为多态、对象多态）。</p>
<h2 id="4、依赖倒置原则"><a href="#4、依赖倒置原则" class="headerlink" title="4、依赖倒置原则"></a>4、依赖倒置原则</h2><p>高层和低层都应该依赖抽象，抽象接口之间进行依赖。</p>
<h2 id="5、接口隔离原则"><a href="#5、接口隔离原则" class="headerlink" title="5、接口隔离原则"></a>5、接口隔离原则</h2><p>客户端不应该依赖所不需要的接口。</p>
<h2 id="6、迪米特原则"><a href="#6、迪米特原则" class="headerlink" title="6、迪米特原则"></a>6、迪米特原则</h2><p>减少类之间的依赖，降低耦合。</p>
<hr>
<h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><p><strong>创建型模式</strong>，确保某一个类只有一个实例，并可以自行实例化并像整个系统提供这个实例</p>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><ul>
<li>某个对象过多消耗资源</li>
<li>某种类型的对象应该只有一个</li>
</ul>
<h2 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h2><ol>
<li>构造函数私有化</li>
<li>通过静态函数或者枚举返回单例对象</li>
<li>在多线程环境下，确保单例对象只有一个</li>
<li>在反序列化时，确保不会重新创建对象</li>
</ol>
<h2 id="种类"><a href="#种类" class="headerlink" title="种类"></a>种类</h2><ol>
<li>饿汉式（实例化类时就直接创建，消耗资源）</li>
<li>懒汉式（每次获取单例时，都会synchronized同步，消耗不必要的资源）</li>
<li>双重检查式（DCL，由于java自身问题，不适用于高并发情况）</li>
<li>静态内部类式（推荐使用，实例化内部类时才会创建实例，线程安全、对象单一）</li>
<li>枚举单例（线程安全、对象单一，无反序列化问题）</li>
<li>容器式（使用map容器保存单例，如获取Android系统服务）</li>
</ol>
<h2 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h2><ul>
<li>减少内存开支，尤其是需要频繁创建销毁一个对象，性能又无法优化时</li>
<li>所创建的对象占资源比较大，可以只创建一个对象，永驻内存</li>
<li>避免同一资源的同时操作</li>
<li>优化全局资源的共享</li>
</ul>
<h2 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>没有接口，扩建较为困难</li>
<li>如果单例对象持有Context对象，容易发生内存泄漏，如果使用，最好使用ApplicationContext</li>
</ul>
<hr>
<h1 id="建造者模式"><a href="#建造者模式" class="headerlink" title="建造者模式"></a>建造者模式</h1><p><strong>创建型模式</strong>，将一个复杂的对象的构建与表示分离，使得同样的构建过程可以表示为不同的形式，允许用户不知道内部的构造细节，但可以更加精确的控制对象的构造流程</p>
<h2 id="场景-1"><a href="#场景-1" class="headerlink" title="场景"></a>场景</h2><ul>
<li>多个部件或者零件都可以装配到一个对象中，但产生的结果不同时</li>
<li>初始化一个对象或者产品类特别复杂，如参数多，但有默认值时</li>
</ul>
<h2 id="实现-1"><a href="#实现-1" class="headerlink" title="实现"></a>实现</h2><ul>
<li>Product产品类——产品的抽象类</li>
<li>Builder——抽象的Builder，规范组建，常使用调用链实现（返回值为本对象，代码简介、易懂）</li>
<li>ConcreateBuilder——具体的Builder类</li>
<li>Director——统一组装过程</li>
</ul>
<h2 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h2><ul>
<li>良好的封装性，构建时不比知晓内部构建细节</li>
<li>良好的扩展性，建造者独立</li>
</ul>
<h2 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>产生多余的Builder和Dirctor对象，消耗内存</li>
</ul>
<hr>
<h1 id="原型模式"><a href="#原型模式" class="headerlink" title="原型模式"></a>原型模式</h1><p><strong>创建型模式</strong>，复制原型实例，创建一个相同的对象，不会执行构造函数</p>
<h2 id="场景-2"><a href="#场景-2" class="headerlink" title="场景"></a>场景</h2><ul>
<li>创建一个对象需要特别多的数据准备、访问权限，类初始化时消耗很多资源</li>
<li>保护性拷贝，避免自己的对象被修改</li>
</ul>
<h2 id="实现-2"><a href="#实现-2" class="headerlink" title="实现"></a>实现</h2><h3 id="实现-3"><a href="#实现-3" class="headerlink" title="实现"></a>实现</h3><ol>
<li>继承Cloneable接口</li>
<li>重写方法<code>clone()</code></li>
<li>修改<code>clone()</code>方法访问权限为protect或者public</li>
<li><code>return super.clone()</code>等操作</li>
</ol>
<h3 id="浅拷贝（影子拷贝）"><a href="#浅拷贝（影子拷贝）" class="headerlink" title="浅拷贝（影子拷贝）"></a>浅拷贝（影子拷贝）</h3><p>内部引用类型数据还是使用的相同地址，数据对象为同一个</p>
<h3 id="深拷贝（推荐使用）"><a href="#深拷贝（推荐使用）" class="headerlink" title="深拷贝（推荐使用）"></a>深拷贝（推荐使用）</h3><p>内部引用类型的数据也被clone，与原型数据不是同一个</p>
<h2 id="优点-2"><a href="#优点-2" class="headerlink" title="优点"></a>优点</h2><p>在内存中进行二进制流拷贝，性能好，速度快</p>
<h2 id="缺点-2"><a href="#缺点-2" class="headerlink" title="缺点"></a>缺点</h2><p>构造函数不会执行，开发时应该注意</p>
<hr>
<h1 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h1><p><strong>创建型模式</strong>，定义一个用于创建对象的接口，让子类决定实例化哪个类</p>
<h2 id="场景-3"><a href="#场景-3" class="headerlink" title="场景"></a>场景</h2><ul>
<li>生成复杂对象</li>
</ul>
<h2 id="实现-4"><a href="#实现-4" class="headerlink" title="实现"></a>实现</h2><h3 id="实现-5"><a href="#实现-5" class="headerlink" title="实现"></a>实现</h3><ol>
<li>抽象工厂——Factory</li>
<li>具体工厂——ConcreateFactory</li>
<li>抽象产品——Product</li>
<li>具体产品——ConcreateProduct</li>
</ol>
<h3 id="多工厂模式"><a href="#多工厂模式" class="headerlink" title="多工厂模式"></a>多工厂模式</h3><p>经常使用<strong>反射</strong>更简洁的生产某个对象</p>
<h3 id="静态工厂模式"><a href="#静态工厂模式" class="headerlink" title="静态工厂模式"></a>静态工厂模式</h3><p>直接返回某个产品实例，工厂类比较多</p>
<h2 id="优点-3"><a href="#优点-3" class="headerlink" title="优点"></a>优点</h2><ul>
<li>扩展性好</li>
<li>耦合低</li>
</ul>
<h2 id="缺点-3"><a href="#缺点-3" class="headerlink" title="缺点"></a>缺点</h2><ul>
<li>新增加产品时，要引入抽象层，导致类结构复杂化</li>
</ul>
<hr>
<h1 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h1><p><strong>行为型模式</strong>，</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="https://smallhamburger.github.io/blog/2016/09/01/笔记-Android群英传/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="会飞的汉堡包">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/blog/images/zjs_blog_icon.jpg">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="学习笔记">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="学习笔记" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/blog/2016/09/01/笔记-Android群英传/" itemprop="url">
                  笔记-Android群英传
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-09-01T00:00:00+08:00">
                2016-09-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/技术类/" itemprop="url" rel="index">
                    <span itemprop="name">技术类</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/blog/2016/09/01/笔记-Android群英传/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/09/01/笔记-Android群英传/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><p>大色块使用</p>
</li>
<li><p>Material Design<br> 主题</p>
</li>
<li><p>Palette<br> 提取颜色<br> 依赖：<code>com.android.support:palette-v7:21.0.2</code></p>
</li>
<li><p>elevation<br> 阴影</p>
<pre><code>xml--&gt;elevation
</code></pre></li>
<li><p>Tinting<br> 着色</p>
<pre><code>xml--&gt;tint/tintMode
</code></pre></li>
<li><p>Clipping<br> 裁剪</p>
<pre><code>java--&gt;
    ViewOutlineProvider vopCircle = new ViewOutlineProvider() {
        @Override
        public void getOutline(View view, Outline outline) {
            outline.setOval(0, 0, view.getWidth(), view.getHeight());
        }
    };
    cicle.setOutlineProvider(vopCircle);
注意：背景会覆盖裁剪
</code></pre></li>
<li><p>RecyclerView<br> 列表<br> 依赖：<code>com.android.support:recyclerview-v7:21.0.2</code><br> RecyclerView.Adapter</p>
</li>
<li><p>CardView<br> 卡片<br> 依赖：<code>com.android.support:cardview-v7:23.0.1</code></p>
<pre><code>xml--&gt;
    (1) xmlns:cardview=&quot;http://schemas.android.com/apk/res-auto&quot;
    (2) cardview:cardBackgroundColor=&quot;#aaf&quot;
       (3) cardview:cardCornerRadius=&quot;8dp&quot;
</code></pre></li>
<li><p>过渡动画<br> Explode/Slide/Fade<br> ActivityA:</p>
<pre><code>java--&gt;startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(this).toBundle());
</code></pre><p> ActivityB:</p>
<pre><code>java--&gt;
getWindow().requestFeature(Window.FEATURE_CONTENT_TRANSITIONS);
getWindow().setEnterTransition(new Explode());
getWindow().setExitTransition(new Slide());
</code></pre></li>
<li><p>共享元素<br>ActivityA:</p>
<pre><code>java--&gt;
startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(this, Pair.create(view,&quot;fab&quot;)).toBundle());
startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(this, view,&quot;fab&quot;).toBundle());
</code></pre><p>XMLB–&gt;</p>
<pre><code>android:transitionName=&quot;fab&quot;
</code></pre></li>
<li><p>Ripple<br>波纹效果</p>
<pre><code>有界：android:backgroud=&quot;?android:attr/selectableItemBackgroud&quot;
无界：android:backgroud=&quot;?android:attr/selectableItemBackgroudBorderless&quot;
</code></pre><p>XML–&gt;</p>
<pre><code>&lt;ripple 
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    android:color=&quot;#faa&quot;&gt;
    &lt;!--可省略--&gt;
    &lt;item&gt;
        &lt;shape android:shape=&quot;oval&quot;&gt;
            &lt;solid android:color=&quot;#aaf&quot;&gt;&lt;/solid&gt;
        &lt;/shape&gt;
    &lt;/item&gt;
&lt;/ripple&gt;
</code></pre></li>
<li><p>Circular Reveal<br>圆形展示</p>
<pre><code>final Animator animator;
imageView.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if(animator!=null &amp;&amp; animator.isRunning()){
            return false;
        }
        animator = ViewAnimationUtils.createCircularReveal(imageView, (int) event.getX(),(int) event.getY(), 0, (float) Math.hypot(imageView.getWidth(), imageView.getHeight()));
        animator.setInterpolator(new AccelerateDecelerateInterpolator());
        animator.setDuration(1000);
        animator.start();
        return false;
    }
});
</code></pre></li>
<li><p>StateListAnimator<br>java–&gt;</p>
<pre><code>imageView.setStateListAnimator(AnimatorInflater.loadStateListAnimator(this,R.drawable.state_selector));
</code></pre><p>state_selector.XML–&gt;</p>
<pre><code>&lt;ImageButton
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    android:src=&quot;@mipmap/ic_launcher&quot;
    android:stateListAnimator=&quot;@drawable/state_selector&quot;/&gt;
</code></pre><p>selector.XML–&gt;</p>
<pre><code>&lt;selector xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
    &lt;item android:state_pressed=&quot;true&quot;&gt;
        &lt;set&gt;
            &lt;objectAnimator android:propertyName=&quot;rotationY&quot;
                android:duration=&quot;1000&quot;
                android:valueTo=&quot;30&quot;
                android:pivotY=&quot;0&quot;
                android:valueType=&quot;floatType&quot;/&gt;
        &lt;/set&gt;
    &lt;/item&gt;
    &lt;item&gt;
        &lt;set&gt;
            &lt;objectAnimator android:propertyName=&quot;rotationY&quot;
                android:duration=&quot;1000&quot;
                android:valueTo=&quot;0&quot;
                android:pivotY=&quot;0&quot;
                android:valueType=&quot;floatType&quot;/&gt;
        &lt;/set&gt;
    &lt;/item&gt;
&lt;/selector&gt;
</code></pre></li>
<li><p>animated-selector</p>
<pre><code>5.X新特性
--&gt;P290
    无法复现
</code></pre></li>
<li><p>Toolbar</p>
<pre><code>代替ActionBar
compile &apos;com.android.support:appcompat-v7:21.0.3&apos;
--&gt;P294
    无法复现================================================
        java--&gt;
    toolbar= (Toolbar) findViewById(android.R.id.toolbar);
    toolbar.setLogo(R.mipmap.ic_launcher);
    toolbar.setTitle(&quot;主标题&quot;);
    toolbar.setSubtitle(&quot;副标题&quot;);
    setSupportActionBar(toolbar);
    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    mDrawerLayout= (DrawerLayout) findViewById(R.id.drawer);
    mDrawerToggle = new ActionBarDrawerToggle(this,mDrawerLayout, toolbar, R.string.abc_action_bar_home_description,R.string.abc_action_bar_home_description_format);
    mDrawerToggle.syncState();
    mDrawerLayout.setDrawerListener(mDrawerToggle);
style.XML--&gt;
    &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.DarkActionBar&quot;&gt;
        &lt;item name=&quot;colorPrimary&quot;&gt;#4876FF&lt;/item&gt;
        &lt;item name=&quot;colorPrimaryDark&quot;&gt;#3A5FCD&lt;/item&gt;
        &lt;item name=&quot;android:windowBackground&quot;&gt;@android:color/white&lt;/item&gt;
        &lt;item name=&quot;android:searchViewStyle&quot;&gt;@style/MySearchView&lt;/item&gt;
        &lt;/style&gt;
        &lt;style name=&quot;MySearchView&quot; parent=&quot;Widget.AppCompat.SearchView&quot;&gt;&lt;/style&gt;
</code></pre></li>
<li><p>DrawerLayout</p>
<pre><code>侧滑菜单--&gt;
&lt;android.support.v4.widget.DrawerLayout
    android:id=&quot;@+id/drawer&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;
    &gt;
    &lt;LinearLayout
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:background=&quot;@android:color/holo_blue_light&quot;
        android:orientation=&quot;vertical&quot;&gt;
        &lt;Button
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;
            android:text=&quot;内容界面&quot;/&gt;
    &lt;/LinearLayout&gt;
    &lt;ScrollView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_gravity=&quot;start&quot;
        &gt;
        &lt;LinearLayout
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;match_parent&quot;
            android:layout_gravity=&quot;start&quot;
            android:background=&quot;@android:color/holo_blue_light&quot;
            android:orientation=&quot;vertical&quot;&gt;
            &lt;Button
                android:layout_width=&quot;200dp&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:text=&quot;菜单界面_1&quot;/&gt;
        &lt;/LinearLayout&gt;
    &lt;/ScrollView&gt;
    &lt;ScrollView
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;
        android:layout_gravity=&quot;end&quot;
        &gt;
        &lt;LinearLayout
            android:layout_width=&quot;wrap_content&quot;
            android:layout_height=&quot;match_parent&quot;
            android:layout_gravity=&quot;end&quot;
            android:background=&quot;@android:color/holo_blue_light&quot;
            android:orientation=&quot;vertical&quot;&gt;
            &lt;Button
                android:layout_width=&quot;200dp&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:text=&quot;菜单界面_2&quot;/&gt;
        &lt;/LinearLayout&gt;
    &lt;/ScrollView&gt;
&lt;/android.support.v4.widget.DrawerLayout&gt;
</code></pre></li>
<li><p>Notification<br>通知<br>折叠式</p>
<pre><code>notification.contentIntent = RemoteViews;
</code></pre><p>展开式</p>
<pre><code>notification.bigContentView = RemoteViews;
</code></pre><p>悬挂式</p>
<pre><code>builder.setFullScreenIntent(pendingIntent, true);
</code></pre><p>等级式</p>
<pre><code>builder.setVisibility(Notification.VISIBILITY_PUBLIC);
</code></pre></li>
<li><p>Layer</p>
<pre><code>图层
    XML--&gt;
        &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
        &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
            &lt;item android:drawable=&quot;@drawable/ic_launcher&quot;&gt;&lt;/item&gt;
            &lt;item android:drawable=&quot;@drawable/ic_launcher&quot;
                android:left=&quot;20dip&quot;
                android:right=&quot;20dip&quot;
                android:bottom=&quot;20dip&quot;
                android:top=&quot;20dip&quot;&gt;&lt;/item&gt;
        &lt;/layer-list&gt;
    Java--&gt;
Paint p =new Paint();
p.setColor(Color.RED);
canvas.drawCircle(getWidth()/3,getHeight()/3,getWidth()/2,p);

canvas.saveLayerAlpha(0, 0 , getWidth() ,getHeight(),127);    &lt;----
p.setColor(Color.GREEN);
canvas.drawCircle(getWidth()*2/3,getHeight()*2/3,getWidth()/2,p);
canvas.restore();
</code></pre></li>
<li><p>Bitmap</p>
<pre><code>XML--&gt;
    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
    &lt;bitmap xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
        android:src=&quot;@drawable/ic_launcher&quot;&gt;
    &lt;/bitmap&gt;
</code></pre></li>
<li><p>ViewStub<br>可以在XML中插入<viewstub>标签，在初次渲染时不会填充这个控件<br>只能调用一次inflate()方法，因为调用一次后，viewStub就变为了指定的控件</viewstub></p>
</li>
</ol>
<p>XML<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;ViewStub</div><div class="line">	android:id=&quot;@+id/view_stub&quot;</div><div class="line">    android:layout_width=&quot;match_parent&quot;</div><div class="line">    android:layout_height=&quot;match_parent&quot;</div><div class="line">    android:layout=&quot;@layout/activity_main&quot;/&gt;</div></pre></td></tr></table></figure></p>
<p>java<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ViewStub viewStub = (ViewStub) findViewById(R.id.view_stub);</div><div class="line">//viewStub.setVisibility(View.VISIBLE);</div><div class="line">LinearLayout ll = (LinearLayout) viewStub.inflate();</div></pre></td></tr></table></figure></p>
<hr>
<h2 id="色彩特效"><a href="#色彩特效" class="headerlink" title="色彩特效"></a>色彩特效</h2><h3 id="色彩矩阵分析"><a href="#色彩矩阵分析" class="headerlink" title="色彩矩阵分析"></a>色彩矩阵分析</h3><ul>
<li>色调–物体传播的颜色</li>
<li>饱和度–颜色的纯度，从0（灰）到100%（饱和）来进行描述</li>
<li>亮度–颜色的相对明暗程度</li>
</ul>
<h3 id="颜色矩阵"><a href="#颜色矩阵" class="headerlink" title="颜色矩阵"></a>颜色矩阵</h3><p>ColorMatrix 4X5数字矩阵</p>
<ol>
<li>处理色调                                                 <pre><code>cm.setRotate()
</code></pre></li>
<li>处理饱和度<pre><code>cm.setSaturation()
</code></pre></li>
<li>处理亮度<pre><code>cm.setScale();
</code></pre><h4 id="例"><a href="#例" class="headerlink" title="例"></a>例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">Paint p =new Paint();</div><div class="line">Bitmap bm = BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher);</div><div class="line">Bitmap bmp = Bitmap.createBitmap(bm);</div><div class="line">ColorMatrix cm = new ColorMatrix();</div><div class="line">//指定颜色矩阵数值4X5，灰度效果</div><div class="line">float[] matrix = &#123;</div><div class="line">        0.33f,0.59f,0.11f,0,0,</div><div class="line">        0.33f,0.59f,0.11f,0,0,</div><div class="line">        0.33f,0.59f,0.11f,0,0,</div><div class="line">        0,    0,    0,    1,0</div><div class="line">&#125;;</div><div class="line">cm.set(matrix);</div><div class="line">ColorMatrix cm2 = new ColorMatrix();</div><div class="line">cm2.setScale(1f,1f,0f,1);</div><div class="line">cm.postConcat(cm2);</div><div class="line">p.setColorFilter(new ColorMatrixColorFilter(cm));</div><div class="line">canvas.drawBitmap(bmp,0,0,p);</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="图形特效"><a href="#图形特效" class="headerlink" title="图形特效"></a>图形特效</h2><h3 id="变形矩阵"><a href="#变形矩阵" class="headerlink" title="变形矩阵"></a>变形矩阵</h3><p>Matrix 3X3数字矩阵</p>
<p>前乘和后乘是不同的运算，影响变换的顺序<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">m.postXXX();</div><div class="line">m.preXXX();</div></pre></td></tr></table></figure></p>
<h4 id="图形变换"><a href="#图形变换" class="headerlink" title="图形变换"></a>图形变换</h4><ol>
<li>平移变换<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.setTranslate();</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">| 1 0 Δx |</div><div class="line">| 0 1 Δy |</div><div class="line">| 0 0  1 |</div></pre></td></tr></table></figure>
<ol>
<li>旋转变换<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.setRotate();</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">| cosα -sinα  0 |</div><div class="line">| sinα  cosα  0 |</div><div class="line">|    0     0  1 |</div></pre></td></tr></table></figure>
<ol>
<li>缩放变换<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.setScale();</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">| k1  0  0 |</div><div class="line">|  0 k2  0 |</div><div class="line">|  0  0  1 |</div></pre></td></tr></table></figure>
<ol>
<li>错切变换<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">m.setSkew();</div></pre></td></tr></table></figure>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">|  1 k1  0 |</div><div class="line">| k2  1  0 |</div><div class="line">|  0  0  1 |</div></pre></td></tr></table></figure>
<h4 id="像素块分析"><a href="#像素块分析" class="headerlink" title="像素块分析"></a>像素块分析</h4><pre><code>/**
 * WIDTH 像素块的横向个数 
 * HEIGHT 像素块的纵向个数 
 * verts 分割线的交叉点坐标数组，包括与边界的交叉点，长度为 （WIDTH + 1）*（HEIGHT + 1）*2
 * /
canvas.drawBitmapMesh(bitmap,WIDTH,HEIGHT,verts,0,null,0,null);
</code></pre><h4 id="例-1"><a href="#例-1" class="headerlink" title="例"></a>例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">public MyTextView(Context context, AttributeSet attrs) &#123;</div><div class="line">    super(context, attrs);</div><div class="line">    init();</div><div class="line">&#125;</div><div class="line">private final int WIDTH = 200;</div><div class="line">private final int HEIGHT = 200;</div><div class="line">private Bitmap bm = BitmapFactory.decodeResource(getResources(), R.mipmap.ic_launcher);</div><div class="line">private float mWidth;</div><div class="line">private float mHeight;</div><div class="line">private float[] orig = new float[(WIDTH+1)*(HEIGHT+1)*2];</div><div class="line">private float[] verts = new float[(WIDTH+1)*(HEIGHT+1)*2];</div><div class="line">private void init()&#123;</div><div class="line">    mWidth=bm.getWidth();</div><div class="line">    mHeight=bm.getHeight();</div><div class="line">    float dx = mWidth/WIDTH;</div><div class="line">    float dy = mHeight/HEIGHT;</div><div class="line">    for (int y=0;y&lt;=HEIGHT;y++)&#123;</div><div class="line">        for (int x=0;x&lt;=WIDTH;x++)&#123;</div><div class="line">            int index = (WIDTH+1)*y+x;</div><div class="line">            orig[index*2]=verts[index*2]=dx*x;</div><div class="line">            orig[index*2+1]=verts[index*2+1]=dy*y+100;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line">@Override</div><div class="line">protected void onDraw(Canvas canvas) &#123;</div><div class="line">    wave();</div><div class="line">    canvas.drawBitmapMesh(bm,WIDTH,HEIGHT,verts,0,null,0,null);</div><div class="line">    super.onDraw(canvas);</div><div class="line">    invalidate();</div><div class="line">&#125;</div><div class="line">private double k;</div><div class="line">private final int A = 10;</div><div class="line">private void wave()&#123;</div><div class="line">    for (int y=0;y&lt;=HEIGHT;y++)&#123;</div><div class="line">        for (int x=0;x&lt;=WIDTH;x++)&#123;</div><div class="line">            int index = (WIDTH+1)*y+x;</div><div class="line">            verts[index*2] = orig[index*2]+getMeasuredWidth()/2-bm.getWidth()/2;</div><div class="line">            float dy = (float) Math.sin(2*Math.PI/WIDTH*x + Math.PI*k);</div><div class="line">            verts[index*2+1]=orig[index*2+1]+dy*A;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    k+=0.1f;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="画笔特效（极其重要）"><a href="#画笔特效（极其重要）" class="headerlink" title="画笔特效（极其重要）"></a>画笔特效（极其重要）</h2><h3 id="PorterDuffXfermode"><a href="#PorterDuffXfermode" class="headerlink" title="PorterDuffXfermode"></a>PorterDuffXfermode</h3><p>遮盖效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));</div></pre></td></tr></table></figure></p>
<p>更好的效果可以使用贝塞尔曲线，当前只使用圆滑效果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mPaint.setStyle(Paint.Style.STROKE);</div><div class="line">mPaint.setStrokeJoin(Paint.Join.ROUND);</div><div class="line">mPaint.setStrokeWidth(100);</div><div class="line">mPaint.setStrokeCap(Paint.Cap.ROUND);</div><div class="line">mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_IN));</div></pre></td></tr></table></figure></p>
<p><strong><em>注意</em></strong>：</p>
<ul>
<li>最好关闭在绘图时关闭硬件加速，有些模式不支持硬件加速</li>
</ul>
<h4 id="例："><a href="#例：" class="headerlink" title="例："></a>例：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">private void init()&#123;</div><div class="line">	//低层的就是dst，上层的就是src</div><div class="line">    src = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);</div><div class="line">    dst =Bitmap.createBitmap(src.getWidth(),src.getHeight(), Bitmap.Config.ARGB_8888);</div><div class="line">    mCanvas = new Canvas(dst);</div><div class="line">    mPaint = new Paint();</div><div class="line">    mPaint.setColor(Color.RED);</div><div class="line">    mCanvas.drawCircle(src.getWidth()/2,src.getHeight()/2,src.getHeight()/3,mPaint);</div><div class="line">    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));</div><div class="line">    mCanvas.drawBitmap(src,0,0,mPaint);</div><div class="line">    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.DST_OUT));</div><div class="line">    mCanvas.drawCircle(src.getWidth()/2,src.getHeight()/2,src.getHeight()/10,mPaint);</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Override</div><div class="line">protected void onDraw(Canvas canvas) &#123;</div><div class="line">    super.onDraw(canvas);</div><div class="line">    canvas.drawBitmap(dst,0,0,null);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Shader"><a href="#Shader" class="headerlink" title="Shader"></a>Shader</h3><p>着色器，渲染器<br>实现一系列的渐变和渲染效果</p>
<p><strong>Shader</strong></p>
<ol>
<li>BitmapShader–位图Shader</li>
<li>LinearGradient–线性Shader</li>
<li>RadialGradient–光束Shader</li>
<li>SweepGradient–梯度Shader</li>
<li>ComposeShader–混合Shader</li>
</ol>
<h4 id="例–LinearGradient："><a href="#例–LinearGradient：" class="headerlink" title="例–LinearGradient："></a>例–LinearGradient：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@Override</div><div class="line">protected void onDraw(Canvas canvas) &#123;</div><div class="line">    mPaint.setShader(new LinearGradient(0,0,getMeasuredWidth(),0,Color.RED,Color.GREEN, Shader.TileMode.MIRROR));</div><div class="line">    canvas.drawRect(0,0,getMeasuredWidth(),getMeasuredHeight(),mPaint);</div><div class="line">    super.onDraw(canvas);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="例–PorterXfermode和Shader混合使用："><a href="#例–PorterXfermode和Shader混合使用：" class="headerlink" title="例–PorterXfermode和Shader混合使用："></a>例–PorterXfermode和Shader混合使用：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">private void init()&#123;</div><div class="line">    src = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);</div><div class="line">    Matrix matrix = new Matrix();</div><div class="line">    matrix.setScale(1f,-1f);</div><div class="line">    dust = Bitmap.createBitmap(src,0,0,src.getWidth(),src.getHeight(),matrix,true);</div><div class="line">    mPaint = new Paint();</div><div class="line">    mPaint.setShader(new LinearGradient(0,src.getHeight(),0,src.getHeight()*2,0xFF000000,0xffffffff, Shader.TileMode.CLAMP));</div><div class="line">&#125;</div><div class="line"></div><div class="line">@Override</div><div class="line">protected void onDraw(Canvas canvas) &#123;</div><div class="line">    super.onDraw(canvas);</div><div class="line">    int saveCount = canvas.saveLayer(0,0,getMeasuredWidth(),getMeasuredHeight(),null,Canvas.ALL_SAVE_FLAG &amp; (~Canvas.CLIP_SAVE_FLAG));</div><div class="line">    canvas.drawBitmap(src,0,0,null);</div><div class="line">    canvas.drawBitmap(dust,0,src.getHeight(),null);</div><div class="line">    mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SRC_IN));</div><div class="line">    canvas.drawRect(0,src.getHeight(),src.getHeight(),src.getHeight()*2,mPaint);</div><div class="line">    mPaint.setXfermode(null);</div><div class="line">    canvas.restoreToCount(saveCount);</div></pre></td></tr></table></figure>
<h3 id="PathEffect"><a href="#PathEffect" class="headerlink" title="PathEffect"></a>PathEffect</h3><p>路径效果</p>
<ol>
<li><p>null<br>无效果</p>
</li>
<li><p>CornerPathEffect<br>将拐角变得圆滑</p>
</li>
<li><p>DisctetePathEffect<br>线段上有很多的杂点</p>
</li>
<li><p>DashPathEffect<br>绘制虚线，可以控制每个点的间隔</p>
</li>
<li><p>PathDashPathEffect<br>DashPathEffect增强版，可以设置点的样式，矩形，圆点等</p>
</li>
<li><p>ComposePathEffect<br>组合方式</p>
</li>
</ol>
<h4 id="例：-1"><a href="#例：-1" class="headerlink" title="例："></a>例：</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line">public class MyPathView extends View&#123;</div><div class="line">    private Path mPath;</div><div class="line">    private PathEffect[] mPathEffects = new PathEffect[6];</div><div class="line">    private Paint mPaint;</div><div class="line">    public MyPathView(Context context, AttributeSet attrs) &#123;</div><div class="line">        super(context, attrs);</div><div class="line">        mPath = new Path();</div><div class="line">        mPath.moveTo(0,200);</div><div class="line">        for(int i=1;i&lt;50;i++)&#123;</div><div class="line">            mPath.lineTo(i*20, (float) (Math.random()*100)+200);</div><div class="line">        &#125;</div><div class="line">        mPaint = new Paint();</div><div class="line">        mPaint.setColor(Color.parseColor(&quot;#000000&quot;));</div><div class="line">        mPaint.setStyle(Paint.Style.STROKE);</div><div class="line">        mPaint.setStrokeWidth(5);</div><div class="line">        mPathEffects[0] = null;</div><div class="line">        mPathEffects[1] = new CornerPathEffect(30);</div><div class="line">        mPathEffects[2] = new DiscretePathEffect(3f,5f);</div><div class="line">        mPathEffects[3] = new DashPathEffect(new float[]&#123;50f,10f,5f&#125;,0);</div><div class="line">        Path path = new Path();</div><div class="line">        path.addRect(0,0,8,8,Path.Direction.CCW);</div><div class="line">        mPathEffects[4] = new PathDashPathEffect(path,12,0,PathDashPathEffect.Style.ROTATE);</div><div class="line">        mPathEffects[5] = new ComposePathEffect( mPathEffects[3], mPathEffects[1]);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    protected void onDraw(Canvas canvas) &#123;</div><div class="line">        super.onDraw(canvas);</div><div class="line">        canvas.save();</div><div class="line">        for (int i = 0 ;i&lt; mPathEffects.length;i++)&#123;</div><div class="line">            mPaint.setPathEffect(mPathEffects[i]);</div><div class="line">            canvas.drawPath(mPath,mPaint);</div><div class="line">            canvas.translate(0, 200);</div><div class="line">        &#125;</div><div class="line">        canvas.restore();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong><em>效果图如下</em></strong><br><img src="https://raw.githubusercontent.com/SmallHamburger/blog/master/images/PathEffect.png" alt="PathEffect"></p>
<h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="布局动画"><a href="#布局动画" class="headerlink" title="布局动画"></a>布局动画</h3><p>LinearLayout</p>
<h4 id="例-2"><a href="#例-2" class="headerlink" title="例"></a>例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">LinearLayout ll = (LinearLayout) findViewById(R.id.ll);</div><div class="line">ScaleAnimation sa = new ScaleAnimation(0, 1, 0, 1);</div><div class="line">sa.setDuration(2000);</div><div class="line">LayoutAnimationController lac = new LayoutAnimationController(sa, 0.5f);</div><div class="line">lac.setOrder(LayoutAnimationController.ORDER_RANDOM);</div><div class="line">ll.setLayoutAnimation(lac);</div></pre></td></tr></table></figure>
<h2 id="SVG"><a href="#SVG" class="headerlink" title="SVG"></a>SVG</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  

          
          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/blog/images/zjs_blog_icon.jpg"
               alt="会飞的汉堡包" />
          <p class="site-author-name" itemprop="name">会飞的汉堡包</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
        
          
            <div class="site-state-item site-state-posts">
              <a href="/blog/archives">
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-categories">
              <a href="/blog/categories">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/blog/tags">
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love"  style="display:none">
    <i class="fa fa-heart"></i>
  </span>&nbsp;
  <span class="author" itemprop="copyrightHolder">会飞的汉堡包</span>
</div>


<div class="powered-by" style="display:none">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info" style="display:none">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  




  
  <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.0"></script>



  
  

  

  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"smallhamburger"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/blog/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/blog/js/src/hook-duoshuo.js"></script>
  












  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
      search_path = "search.xml";
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();
    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';
      $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = $( "entry", xmlResponse ).map(function() {
            return {
              title: $( "title", this ).text(),
              content: $("content",this).text(),
              url: $( "url" , this).text()
            };
          }).get();
          var $input = document.getElementById(search_id);
          var $resultContent = document.getElementById(content_id);
          $input.addEventListener('input', function(){
            var matchcounts = 0;
            var str='<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length > 1) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var content_index = [];
                var data_title = data.title.trim().toLowerCase();
                var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                var data_url = decodeURIComponent(data.url);
                var index_title = -1;
                var index_content = -1;
                var first_occur = -1;
                // only match artiles with not empty titles and contents
                if(data_title != '') {
                  keywords.forEach(function(keyword, i) {
                    index_title = data_title.indexOf(keyword);
                    index_content = data_content.indexOf(keyword);
                    if( index_title >= 0 || index_content >= 0 ){
                      isMatch = true;
                      if (i == 0) {
                        first_occur = index_content;
                      }
                    }

                  });
                }
                // show search results
                if (isMatch) {
                  matchcounts += 1;
                  str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                  var content = data.content.trim().replace(/<[^>]+>/g,"");
                  if (first_occur >= 0) {
                    // cut out 100 characters
                    var start = first_occur - 20;
                    var end = first_occur + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if(start == 0){
                      end = 50;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    var match_content = content.substring(start, end);
                    // highlight all keywords
                    keywords.forEach(function(keyword){
                      var regS = new RegExp(keyword, "gi");
                      match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                    });

                    str += "<p class=\"search-result\">" + match_content +"...</p>"
                  }
                  str += "</li>";
                }
              })};
            str += "</ul>";
            if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
            if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
            $resultContent.innerHTML = str;
          });
          proceedsearch();
        }
      });}

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>


  

  

  

  


</body>
</html>
